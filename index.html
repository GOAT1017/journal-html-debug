<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Griffin's Rise: Advanced Trading Journal — Pro Edition</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!-- Self-contained styles (no external CDN dependencies) -->
  <!-- Unified Custom Styles -->
  <style>
    html, body {
      background: #232946;
      color: #dbeafe;
      font-family: 'Montserrat', system-ui, sans-serif;
      min-height: 100vh;
      font-size: 16px;
      margin: 0;
      padding: 0;
    }
    
    /* Core Tailwind-like utilities */
    .hidden { display: none !important; }
    .flex { display: flex; }
    .flex-col { flex-direction: column; }
    .flex-row { flex-direction: row; }
    .items-center { align-items: center; }
    .justify-center { justify-content: center; }
    .justify-between { justify-content: space-between; }
    .gap-1 { gap: 0.25rem; }
    .gap-2 { gap: 0.5rem; }
    .gap-3 { gap: 0.75rem; }
    .gap-4 { gap: 1rem; }
    .gap-6 { gap: 1.5rem; }
    .gap-8 { gap: 2rem; }
    .p-3 { padding: 0.75rem; }
    .p-4 { padding: 1rem; }
    .p-5 { padding: 1.25rem; }
    .p-6 { padding: 1.5rem; }
    .p-8 { padding: 2rem; }
    .px-2 { padding-left: 0.5rem; padding-right: 0.5rem; }
    .px-3 { padding-left: 0.75rem; padding-right: 0.75rem; }
    .px-4 { padding-left: 1rem; padding-right: 1rem; }
    .px-5 { padding-left: 1.25rem; padding-right: 1.25rem; }
    .px-6 { padding-left: 1.5rem; padding-right: 1.5rem; }
    .py-1 { padding-top: 0.25rem; padding-bottom: 0.25rem; }
    .py-2 { padding-top: 0.5rem; padding-bottom: 0.5rem; }
    .py-3 { padding-top: 0.75rem; padding-bottom: 0.75rem; }
    .py-4 { padding-top: 1rem; padding-bottom: 1rem; }
    .mb-1 { margin-bottom: 0.25rem; }
    .mb-2 { margin-bottom: 0.5rem; }
    .mb-3 { margin-bottom: 0.75rem; }
    .mb-4 { margin-bottom: 1rem; }
    .mb-5 { margin-bottom: 1.25rem; }
    .mb-6 { margin-bottom: 1.5rem; }
    .mb-8 { margin-bottom: 2rem; }
    .mt-2 { margin-top: 0.5rem; }
    .mt-3 { margin-top: 0.75rem; }
    .mt-4 { margin-top: 1rem; }
    .mt-5 { margin-top: 1.25rem; }
    .mt-6 { margin-top: 1.5rem; }
    .ml-2 { margin-left: 0.5rem; }
    .ml-3 { margin-left: 0.75rem; }
    .ml-auto { margin-left: auto; }
    .mr-2 { margin-right: 0.5rem; }
    .mr-3 { margin-right: 0.75rem; }
    .w-full { width: 100%; }
    .max-w-4xl { max-width: 56rem; }
    .max-w-6xl { max-width: 72rem; }
    .mx-auto { margin-left: auto; margin-right: auto; }
    .rounded { border-radius: 0.375rem; }
    .rounded-lg { border-radius: 0.5rem; }
    .rounded-xl { border-radius: 0.75rem; }
    .rounded-full { border-radius: 9999px; }
    .shadow { box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06); }
    .shadow-lg { box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); }
    .shadow-xl { box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04); }
    .border { border-width: 1px; }
    .border-2 { border-width: 2px; }
    .border-blue-900 { border-color: #1e3a8a; }
    .border-blue-700 { border-color: #1d4ed8; }
    .border-green-400 { border-color: #4ade80; }
    .border-yellow-400 { border-color: #facc15; }
    .border-l-4 { border-left-width: 4px; }
    .text-center { text-align: center; }
    .text-left { text-align: left; }
    .text-3xl { font-size: 1.875rem; line-height: 2.25rem; }
    .text-2xl { font-size: 1.5rem; line-height: 2rem; }
    .text-xl { font-size: 1.25rem; line-height: 1.75rem; }
    .text-lg { font-size: 1.125rem; line-height: 1.75rem; }
    .text-base { font-size: 1rem; line-height: 1.5rem; }
    .text-sm { font-size: 0.875rem; line-height: 1.25rem; }
    .text-xs { font-size: 0.75rem; line-height: 1rem; }
    .font-bold { font-weight: 700; }
    .font-semibold { font-weight: 600; }
    .font-extrabold { font-weight: 800; }
    .text-blue-50 { color: #eff6ff; }
    .text-blue-100 { color: #dbeafe; }
    .text-blue-200 { color: #bfdbfe; }
    .text-blue-300 { color: #93c5fd; }
    .text-yellow-100 { color: #fef3c7; }
    .text-yellow-200 { color: #fde68a; }
    .text-yellow-300 { color: #fde047; }
    .text-yellow-400 { color: #facc15; }
    .text-green-100 { color: #dcfce7; }
    .text-green-300 { color: #86efac; }
    .text-green-400 { color: #4ade80; }
    .text-red-400 { color: #f87171; }
    .text-red-600 { color: #dc2626; }
    .text-purple-300 { color: #c4b5fd; }
    .text-pink-300 { color: #f9a8d4; }
    .text-orange-300 { color: #fdba74; }
    .bg-blue-700 { background-color: #1d4ed8; }
    .bg-blue-800 { background-color: #1e40af; }
    .bg-blue-900 { background-color: #1e3a8a; }
    .bg-green-700 { background-color: #15803d; }
    .bg-green-800 { background-color: #166534; }
    .bg-red-600 { background-color: #dc2626; }
    .bg-red-700 { background-color: #b91c1c; }
    .bg-yellow-50 { background-color: #fefce8; }
    .bg-gradient-to-r { background-image: linear-gradient(to right, var(--tw-gradient-stops)); }
    .from-blue-500 { --tw-gradient-from: #3b82f6; --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, rgba(59, 130, 246, 0)); }
    .to-purple-600 { --tw-gradient-to: #9333ea; }
    .from-green-400 { --tw-gradient-from: #4ade80; --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, rgba(74, 222, 128, 0)); }
    .to-blue-500 { --tw-gradient-to: #3b82f6; }
    .from-yellow-400 { --tw-gradient-from: #facc15; --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, rgba(250, 204, 21, 0)); }
    .to-orange-500 { --tw-gradient-to: #f97316; }
    .from-pink-400 { --tw-gradient-from: #f472b6; --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, rgba(244, 114, 182, 0)); }
    .to-red-500 { --tw-gradient-to: #ef4444; }
    .from-purple-400 { --tw-gradient-from: #c084fc; --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, rgba(192, 132, 252, 0)); }
    .to-pink-500 { --tw-gradient-to: #ec4899; }
    .hover\\:bg-blue-700:hover { background-color: #1d4ed8; }
    .hover\\:bg-blue-800:hover { background-color: #1e40af; }
    .hover\\:bg-green-800:hover { background-color: #166534; }
    .hover\\:bg-red-700:hover { background-color: #b91c1c; }
    .cursor-pointer { cursor: pointer; }
    .transition { transition-property: color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1); transition-duration: 150ms; }
    .transition-all { transition-property: all; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1); transition-duration: 150ms; }
    .transform { transform: translateX(var(--tw-translate-x)) translateY(var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y)); }
    .hover\\:scale-105:hover { --tw-scale-x: 1.05; --tw-scale-y: 1.05; }
    .hover\\:shadow-xl:hover { box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04); }
    .opacity-75 { opacity: 0.75; }
    .opacity-90 { opacity: 0.9; }
    
    /* Additional common utility classes */
    .w-full { width: 100%; }
    .w-1\/2 { width: 50%; }
    .w-1\/3 { width: 33.333333%; }
    .w-2\/3 { width: 66.666667%; }
    .h-full { height: 100%; }
    .min-h-screen { min-height: 100vh; }
    .max-w-md { max-width: 28rem; }
    .max-w-lg { max-width: 32rem; }
    .max-w-xl { max-width: 36rem; }
    .max-w-6xl { max-width: 72rem; }
    .mx-auto { margin-left: auto; margin-right: auto; }
    .mt-1 { margin-top: 0.25rem; }
    .mt-2 { margin-top: 0.5rem; }
    .mt-3 { margin-top: 0.75rem; }
    .mt-4 { margin-top: 1rem; }
    .mt-6 { margin-top: 1.5rem; }
    .mt-8 { margin-top: 2rem; }
    .mb-1 { margin-bottom: 0.25rem; }
    .mb-2 { margin-bottom: 0.5rem; }
    .mb-3 { margin-bottom: 0.75rem; }
    .mb-4 { margin-bottom: 1rem; }
    .mb-6 { margin-bottom: 1.5rem; }
    .mb-8 { margin-bottom: 2rem; }
    .ml-1 { margin-left: 0.25rem; }
    .ml-2 { margin-left: 0.5rem; }
    .ml-8 { margin-left: 2rem; }
    .mr-2 { margin-right: 0.5rem; }
    .mr-3 { margin-right: 0.75rem; }
    .rounded { border-radius: 0.25rem; }
    .rounded-lg { border-radius: 0.5rem; }
    .rounded-xl { border-radius: 0.75rem; }
    .rounded-full { border-radius: 9999px; }
    .border { border-width: 1px; }
    .border-l-4 { border-left-width: 4px; }
    .border-gray-300 { border-color: #d1d5db; }
    .border-blue-400 { border-color: #60a5fa; }
    .shadow { box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06); }
    .shadow-lg { box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); }
    .shadow-xl { box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04); }
    .space-y-1 > * + * { margin-top: 0.25rem; }
    .space-y-2 > * + * { margin-top: 0.5rem; }
    .space-y-3 > * + * { margin-top: 0.75rem; }
    .space-y-4 > * + * { margin-top: 1rem; }
    .space-y-6 > * + * { margin-top: 1.5rem; }
    .text-xs { font-size: 0.75rem; line-height: 1rem; }
    .text-sm { font-size: 0.875rem; line-height: 1.25rem; }
    .text-base { font-size: 1rem; line-height: 1.5rem; }
    .text-lg { font-size: 1.125rem; line-height: 1.75rem; }
    .text-xl { font-size: 1.25rem; line-height: 1.75rem; }
    .text-2xl { font-size: 1.5rem; line-height: 2rem; }
    .text-3xl { font-size: 1.875rem; line-height: 2.25rem; }
    .text-center { text-align: center; }
    .font-medium { font-weight: 500; }
    .font-semibold { font-weight: 600; }
    .font-bold { font-weight: 700; }
    .font-extrabold { font-weight: 800; }
    .text-white { color: #ffffff; }
    .text-gray-600 { color: #4b5563; }
    .text-gray-700 { color: #374151; }
    .text-gray-800 { color: #1f2937; }
    .bg-white { background-color: #ffffff; }
    .bg-gray-50 { background-color: #f9fafb; }
    .bg-gray-700 { background-color: #374151; }
    .bg-gray-800 { background-color: #1f2937; }
    .bg-gray-900 { background-color: #111827; }
    .bg-opacity-20 { background-color: rgba(var(--tw-bg-opacity-value), 0.2); }
    .bg-opacity-30 { background-color: rgba(var(--tw-bg-opacity-value), 0.3); }
    .bg-opacity-90 { background-color: rgba(var(--tw-bg-opacity-value), 0.9); }
    .hover\\:bg-yellow-600:hover { background-color: #ca8a04; }
    .hover\\:bg-yellow-800:hover { background-color: #92400e; }
    .hover\\:bg-blue-900:hover { background-color: #1e3a8a; }
    .hover\\:bg-red-800:hover { background-color: #991b1b; }
    .hover\\:text-green-300:hover { color: #86efac; }
    .hover\\:underline:hover { text-decoration: underline; }
    .underline { text-decoration: underline; }
    .uppercase { text-transform: uppercase; }
    .align-middle { vertical-align: middle; }
    .list-disc { list-style-type: disc; }
    .overflow-hidden { overflow: hidden; }
    .block { display: block; }
    .inline-block { display: inline-block; }
    .inline-flex { display: inline-flex; }
    .table { display: table; }
    .grid { display: grid; }
    .fixed { position: fixed; }
    .relative { position: relative; }
    .top-4 { top: 1rem; }
    .right-4 { right: 1rem; }
    .z-50 { z-index: 50; }
    .flex-wrap { flex-wrap: wrap; }
    .flex-1 { flex: 1 1 0%; }
    .ring-8 { box-shadow: 0 0 0 8px var(--tw-ring-color); }
    .ring-yellow-200 { --tw-ring-color: #fde68a; }
    .ring-opacity-80 { --tw-ring-opacity: 0.8; }
    .object-contain { object-fit: contain; }
    
    /* Media Queries for responsive design */
    @media (min-width: 768px) {
      .md\\:w-1\\/3 { width: 33.333333%; }
      .md\\:w-2\\/3 { width: 66.666667%; }
      .md\\:flex-row { flex-direction: row; }
      .md\\:gap-2 { gap: 0.5rem; }
      .md\\:mt-0 { margin-top: 0; }
    }

    /* FontAwesome Icons (inline fallback) */
    .icon { display: inline-block; width: 1em; height: 1em; text-align: center; }
    .icon-graduation::before { content: "🎓"; }
    .icon-chart::before { content: "📊"; }
    .icon-trophy::before { content: "🏆"; }
    .icon-star::before { content: "⭐"; }
    .icon-book::before { content: "📚"; }
    .icon-target::before { content: "🎯"; }
    .icon-brain::before { content: "🧠"; }
    .icon-certificate::before { content: "📜"; }
    .icon-cubes::before { content: "🧩"; }
    .icon-search::before { content: "🔍"; }
    .icon-pen::before { content: "✍️"; }
    .icon-lock::before { content: "🔒"; }
    .icon-unlock::before { content: "🔓"; }
    .icon-check::before { content: "✅"; }
    .icon-fire::before { content: "🔥"; }
    .icon-rocket::before { content: "🚀"; }
    .icon-diamond::before { content: "💎"; }
    .icon-chevron-down::before { content: "▼"; }
    .icon-chevron-right::before { content: "▶"; }
    
    /* Phase Card Styles */
    .phase-card {
      background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%);
      border-radius: 1rem;
      margin-bottom: 1.5rem;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
      transition: all 0.3s ease;
      overflow: hidden;
    }
    .phase-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
    }
    
    .phase-header {
      padding: 1.5rem;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    .phase-header:hover {
      background: rgba(255, 255, 255, 0.1);
    }
    
    .phase-content {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.4s ease, padding 0.4s ease;
      background: rgba(255, 255, 255, 0.95);
      color: #1f2937;
    }
    .phase-content.expanded {
      max-height: 500px;
      padding: 1.5rem;
    }
    
    .phase-stats {
      background: #e0f2fe;
      border-radius: 0.5rem;
      padding: 1rem;
      margin-bottom: 1rem;
      border-left: 4px solid #0ea5e9;
    }
    
    .phase-badge {
      display: inline-flex;
      align-items: center;
      padding: 0.25rem 0.75rem;
      border-radius: 9999px;
      font-size: 0.75rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }
    .phase-badge.locked {
      background: #64748b;
      color: white;
    }
    .phase-badge.unlocked {
      background: #22c55e;
      color: white;
    }
    .phase-badge.completed {
      background: linear-gradient(90deg, #facc15, #22c55e);
      color: #1f2937;
    }
    
    .lesson-item {
      background: #f8fafc;
      border-radius: 0.5rem;
      padding: 1rem;
      margin-bottom: 1rem;
      border-left: 4px solid #3b82f6;
    }
    
    .complete-phase-btn {
      background: linear-gradient(90deg, #22c55e, #16a34a);
      color: white;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 0.5rem;
      font-size: 0.875rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
    }
    .complete-phase-btn:hover {
      background: linear-gradient(90deg, #16a34a, #15803d);
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(34, 197, 94, 0.3);
    }
    .complete-phase-btn.completed {
      background: linear-gradient(90deg, #facc15, #f59e0b);
      color: #1f2937;
    }
    
    .chevron {
      transition: transform 0.3s ease;
    }
    .phase-card.expanded .chevron {
      transform: rotate(90deg);
    }
    
    /* Badge Achievement Styles */
    .achievement-badge {
      display: inline-flex;
      align-items: center;
      background: linear-gradient(135deg, #facc15, #f59e0b);
      color: #1f2937;
      padding: 0.5rem 1rem;
      border-radius: 9999px;
      font-size: 0.875rem;
      font-weight: 600;
      box-shadow: 0 4px 12px rgba(245, 158, 11, 0.3);
      animation: bounce-in 0.6s ease;
    }
    
    @keyframes bounce-in {
      0% { transform: scale(0); opacity: 0; }
      50% { transform: scale(1.1); opacity: 0.8; }
      100% { transform: scale(1); opacity: 1; }
    }
    
    /* Progress Stats */
    .stat-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      gap: 0.75rem;
      margin-bottom: 1rem;
    }
    .stat-item {
      background: white;
      padding: 0.75rem;
      border-radius: 0.5rem;
      text-align: center;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .stat-label {
      font-size: 0.75rem;
      color: #6b7280;
      font-weight: 500;
    }
    .stat-value {
      font-size: 1.25rem;
      font-weight: 700;
      color: #1f2937;
    }
    .stat-value.positive { color: #22c55e; }
    .stat-value.negative { color: #ef4444; }
    
    /* Responsive adjustments */
    @media (max-width: 768px) {
      .phase-header { padding: 1rem; }
      .phase-content.expanded { padding: 1rem; }
      .phase-card h3 { font-size: 1.125rem; }
      .stat-grid { grid-template-columns: repeat(2, 1fr); }
    }
    .container { width: 100%; margin-left: auto; margin-right: auto; padding-left: 1rem; padding-right: 1rem; }
    @media (min-width: 768px) {
      .container { max-width: 768px; }
      .md\\:flex-row { flex-direction: row; }
      .md\\:w-2\\/3 { width: 66.666667%; }
      .md\\:w-1\\/3 { width: 33.333333%; }
      .md\\:text-4xl { font-size: 2.25rem; line-height: 2.5rem; }
      .md\\:mt-0 { margin-top: 0; }
      .md\\:gap-2 { gap: 0.5rem; }
    }
    @media (min-width: 1024px) {
      .container { max-width: 1024px; }
    }
    @media (min-width: 1280px) {
      .container { max-width: 1280px; }
    }
    /* Tab Styles */
    .tab-active {
      background: linear-gradient(90deg, #2563eb 0%, #facc15 100%) !important;
      color: #fff !important;
      font-weight: 700;
      box-shadow: 0 2px 10px 0 rgba(80,0,120,0.08);
    }
    .tab-btn {
      transition: all 0.2s;
      font-weight: 600;
      letter-spacing: 0.04em;
    }
    /* Section Card Styles */
    .manual-section {
      background: #1a2236 !important;
      color: #dbeafe !important;
      border: 1px solid #28304a;
      box-shadow: 0 3px 18px 0 rgba(90,150,255,0.08);
      transition: box-shadow 0.2s;
    }
    .manual-section:hover {
      box-shadow: 0 8px 32px 0 rgba(120, 80, 255, 0.14);
      border-color: #2563eb;
    }
    /* Badges */
    .badge {
      display: inline-block;
      background: linear-gradient(90deg, #10b981 0%, #2563eb 100%);
      color: #fff;
      border-radius: 9999px;
      padding: 0.25em 0.9em;
      font-size: 1em;
      font-weight: 700;
      margin-left: 0.6em;
      vertical-align: middle;
      letter-spacing: 0.04em;
      box-shadow: 0 2px 4px 0 #2563eb22;
    }
    /* Readable form labels and text */
    label, input, select, textarea, .text-blue-900, .text-blue-100, .text-blue-700, .text-yellow-800 {
      color: #dbeafe !important;
    }
    /* Unified Input, Select, Textarea Styles (Light-on-Dark) */
    input, select, textarea {
      background: #192038 !important;
      color: #dbeafe !important;
      border: 1px solid #28304a !important;
      border-radius: 0.375rem;
      padding: 0.5rem 0.75rem;
      font-size: 1rem;
      font-family: 'Montserrat', system-ui, sans-serif;
      transition: border 0.2s, outline 0.2s;
      outline: none;
      box-shadow: none;
      width: 100%;
      min-width: 0;
      max-width: 100%;
      box-sizing: border-box;
    }
    input:focus, select:focus, textarea:focus {
      outline: 2px solid #facc15 !important;
      background: #232946 !important;
      color: #facc15 !important;
      border-color: #facc15 !important;
    }
    input[type="date"], input[type="number"] { color-scheme: dark; }
    select option { background: #232946; color: #dbeafe; }
    textarea { min-height: 2.5rem; resize: vertical;}
    ::placeholder { color: #b3c2e0 !important; opacity: 1 !important;}

    /* Journal Table Styles */
    table#journal-table th, table#journal-table td {
      border: 1px solid #28304a;
      padding: 8px;
      text-align: left;
    }
    table#journal-table th {
      background: #f8fafc;
      color: #232946;
      font-weight: 700;
    }
    table#journal-table tr:nth-child(even) {
      background: #28304a;
    }
    table#journal-table tr:nth-child(odd) {
      background: #1a2236;
    }
    table#journal-table {
      margin-top: 2rem;
      margin-bottom: 2rem;
      border-radius: 10px;
      overflow: hidden;
      width: 100%;
    }
    /* Journal Form Styles (Legacy support for old form) */
    #journal-form input, #journal-form select, #journal-form button {
      margin-right: 8px;
      margin-bottom: 8px;
      padding: 6px 10px;
      border-radius: 6px;
      border: 1px solid #28304a;
      background: #192038;
      color: #dbeafe;
      font-size: 1em;
    }
    #journal-form button {
      background: linear-gradient(90deg, #facc15 0%, #2563eb 100%);
      color: #232946;
      font-weight: 700;
      cursor: pointer;
      border: none;
      transition: background 0.15s;
    }
    #journal-form button:hover {
      background: linear-gradient(90deg, #2563eb 0%, #facc15 100%);
      color: #fff;
    }
    /* Journal Table/Row Animation & UX */
    .highlight-row { background: #facc1530 !important; transition: background 0.7s;}
    .animate-pulse { animation: pulse 0.9s cubic-bezier(0.4, 0, 0.6, 1) 1;}
    @keyframes pulse { 0%,100%{box-shadow:0 0 0 0 #facc1544;} 70%{box-shadow:0 0 14px 6px #facc1560;}}
    .animate-bounce { animation: badgeBounce 0.55s cubic-bezier(.18,1.3,.57,.99) 1;}
    @keyframes badgeBounce { 0%{transform:scale(1);} 25%{transform:scale(1.13);} 40%{transform:scale(0.96);} 70%{transform:scale(1.07);} 100%{transform:scale(1);}
    }
    .journal-badge.locked { opacity: 0.35; filter: grayscale(0.82); border: 2px dashed #64748b; color: #64748b; pointer-events: none;}
  </style>
</head>
<body>
  <header class="bg-[#232946] shadow-lg py-4 mb-8 border-b border-blue-900">
    <div class="container mx-auto px-4 flex flex-col md:flex-row justify-between items-center gap-2">
      <div class="flex items-center space-x-5">
        <svg width="120" height="80" viewBox="0 0 120 80" class="h-20 w-20 rounded-full shadow-xl ring-4 ring-blue-500 ring-opacity-60 bg-white object-contain" style="min-width:120px;">
          <rect width="120" height="80" fill="#f8fafc" rx="40"/>
          <circle cx="60" cy="40" r="25" fill="#facc15"/>
          <text x="60" y="32" text-anchor="middle" font-family="Arial" font-size="6" font-weight="bold" fill="#1f2937">Griffin's</text>
          <text x="60" y="40" text-anchor="middle" font-family="Arial" font-size="6" font-weight="bold" fill="#1f2937">Rise</text>
          <text x="60" y="48" text-anchor="middle" font-family="Arial" font-size="5" fill="#1f2937">Trading</text>
          <path d="M45 60 L60 55 L75 60" stroke="#2563eb" stroke-width="2" fill="none"/>
        </svg>
        <div>
          <h1 class="text-3xl md:text-4xl font-extrabold tracking-tight text-blue-100" style="font-family:Montserrat,sans-serif">
            Griffin's Rise: <span class="text-yellow-400">Advanced Trading Journal</span>
          </h1>
          <span class="badge mt-2 ml-1 align-middle text-base" style="background:linear-gradient(90deg,#f59e42 0%,#2563eb 100%);color:#fff;">PRO EDITION</span>
        </div>
      </div>
      <nav class="flex flex-wrap gap-1 md:gap-2 items-center mt-4 md:mt-0">
        <button id="educationTab" class="tab-btn bg-gray-700 hover:bg-blue-800 px-4 py-2 rounded transition hidden">Education</button>
        <button id="syllabusTab" class="tab-btn bg-blue-900 hover:bg-blue-700 px-4 py-2 rounded transition hidden">Syllabus</button>
        <button id="trainingManualTab" class="tab-btn bg-yellow-700 hover:bg-yellow-600 px-4 py-2 rounded transition hidden">Training Manual</button>
        <button id="journalTab" class="tab-btn bg-gray-700 hover:bg-blue-900 px-4 py-2 rounded transition hidden">Journal</button>
        <button id="dashboardTab" class="tab-btn bg-gray-700 hover:bg-blue-900 px-4 py-2 rounded transition hidden">Dashboard</button>
        <button id="loginTab" class="tab-btn bg-green-700 hover:bg-green-600 px-4 py-2 rounded transition">Register / Login</button>
        <button id="logoutBtn" class="tab-btn bg-red-700 hover:bg-red-800 px-4 py-2 rounded transition hidden">Logout</button>
      </nav>
    </div>
  </header>
  <main class="container mx-auto px-4 max-w-4xl">
    <!-- Login/Register -->
    <section id="loginContent">
      <div class="manual-section p-6 rounded-lg shadow-lg max-w-md mx-auto mt-8">
        <h2 class="text-2xl font-bold mb-4 text-green-400 text-center">Register / Login</h2>
        <form id="loginForm" class="space-y-4">
          <div>
            <label class="block mb-1" for="login-username">Username</label>
            <input id="login-username" type="text" class="w-full px-3 py-2 rounded" required />
          </div>
          <div>
            <label class="block mb-1" for="login-password">Password</label>
            <input id="login-password" type="password" class="w-full px-3 py-2 rounded" required />
          </div>
          <div class="flex justify-between items-center">
            <button type="submit" class="bg-green-700 hover:bg-green-800 text-white px-4 py-2 rounded font-semibold transition">Login</button>
            <button type="button" id="switchToRegister" class="text-green-300 text-sm hover:underline">Register</button>
          </div>
        </form>
        <form id="registerForm" class="space-y-4 hidden">
          <div>
            <label class="block mb-1" for="register-username">Username</label>
            <input id="register-username" type="text" class="w-full px-3 py-2 rounded" required />
          </div>
          <div>
            <label class="block mb-1" for="register-password">Password</label>
            <input id="register-password" type="password" class="w-full px-3 py-2 rounded" required />
          </div>
          <div>
            <label class="block mb-1" for="register-confirm">Confirm Password</label>
            <input id="register-confirm" type="password" class="w-full px-3 py-2 rounded" required />
          </div>
          <div class="flex justify-between items-center">
            <button type="submit" class="bg-green-700 hover:bg-green-800 text-white px-4 py-2 rounded font-semibold transition">Register</button>
            <button type="button" id="switchToLogin" class="text-green-300 text-sm hover:underline">Login</button>
          </div>
        </form>
        <div id="loginMessage" class="mt-4 text-center text-sm text-green-400"></div>
      </div>
    </section>

   <!-- Education Tab -->
<section id="educationContent" class="hidden">
  <div class="manual-section p-8 rounded-xl shadow mb-8">
    <div class="flex flex-col md:flex-row items-center gap-8">
      <div class="md:w-2/3">
        <h2 class="text-3xl font-extrabold mb-3 text-blue-100">Education</h2>
        <ul class="mt-4 list-disc ml-8 text-blue-50 text-base space-y-1">
          <li>
            Explore the full curriculum in the
            <span class="text-yellow-300 font-semibold">Syllabus</span> tab.
          </li>
          <li>
            Track your lesson progress and earn achievement badges for mastery.
          </li>
          <li>
            Access detailed, actionable how-to guides in the Training Manual.
          </li>
        </ul>
        <div class="mt-6 bg-blue-900/90 border-l-4 border-blue-400 px-4 py-3 rounded">
          <b class="text-yellow-200">Tip:</b>
          <span class="text-blue-100">
            Use the <span class="text-yellow-300">Training Manual</span> for step-by-step checklists. All progress is saved automatically.
          </span>
        </div>
      </div>
      <div class="md:w-1/3 flex justify-center">
        <svg width="320" height="240" viewBox="0 0 320 240" class="w-[320px] max-w-full h-auto rounded-xl shadow ring-8 ring-yellow-200 ring-opacity-80 bg-white object-contain">
          <rect width="320" height="240" fill="#f8fafc"/>
          <circle cx="160" cy="120" r="60" fill="#facc15"/>
          <text x="160" y="90" text-anchor="middle" font-family="Arial" font-size="14" font-weight="bold" fill="#1f2937">Griffin's</text>
          <text x="160" y="110" text-anchor="middle" font-family="Arial" font-size="14" font-weight="bold" fill="#1f2937">Rise</text>
          <text x="160" y="130" text-anchor="middle" font-family="Arial" font-size="12" fill="#1f2937">Trading</text>
          <text x="160" y="150" text-anchor="middle" font-family="Arial" font-size="12" fill="#1f2937">Journal</text>
          <path d="M120 180 L160 160 L200 180" stroke="#2563eb" stroke-width="3" fill="none"/>
        </svg>
      </div>
    </div>
  </div>
</section>
<!-- Syllabus Section: Griffin's Rise Trading Mastery (Pro Edition) -->
<section id="syllabusContent" class="hidden">
  <div class="max-w-6xl mx-auto p-6">
    <!-- Header Section -->
    <div class="bg-gradient-to-r from-blue-500 to-purple-600 rounded-xl p-6 mb-8 shadow-xl">
      <div class="flex items-center gap-4 mb-4">
        <span class="icon icon-graduation text-3xl"></span>
        <h2 class="text-3xl font-extrabold text-white flex-1">Syllabus: Griffin's Rise Trading Mastery</h2>
        <span class="bg-yellow-50 text-blue-900 px-4 py-2 rounded-full text-sm font-bold shadow">Pro Edition 2025</span>
      </div>
      
      <!-- Overall Progress -->
      <div class="bg-white bg-opacity-20 rounded-lg p-4">
        <div class="flex items-center gap-3 mb-2">
          <span class="icon icon-chart text-xl text-yellow-200"></span>
          <h3 class="text-lg font-bold text-white">Your Learning Progress</h3>
        </div>
        <div class="w-full bg-white bg-opacity-30 rounded-full h-3 mb-2">
          <div id="syllabus-progress-bar" class="bg-gradient-to-r from-yellow-400 to-orange-500 h-3 rounded-full transition-all" style="width:0%"></div>
        </div>
        <div class="flex justify-between items-center">
          <span id="syllabus-progress-label" class="text-white font-semibold text-sm">0% Complete</span>
          <button id="syllabus-reset-btn" class="bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded text-xs font-semibold transition">
            Reset Progress
          </button>
        </div>
      </div>
    </div>

    <!-- Achievement Badges -->
    <div class="mb-8">
      <h3 class="text-xl font-bold text-yellow-300 mb-4 flex items-center gap-2">
        <span class="icon icon-trophy"></span> Achievement Badges
      </h3>
      <div id="syllabus-completed-labels" class="flex flex-wrap gap-3"></div>
    </div>

    <!-- Phase Cards -->
    <div class="space-y-6">
      <!-- Foundation Phase -->
      <div id="syllabus-foundation" class="phase-card bg-gradient-to-br from-green-400 to-blue-500" data-phase="0">
        <div class="phase-header" onclick="togglePhase(0)">
          <div class="flex items-center gap-4">
            <span class="phase-icon icon icon-cubes text-2xl"></span>
            <div class="flex-1">
              <h3 class="text-xl font-bold text-white">Phase 1: The Foundation</h3>
              <p class="text-green-100 text-sm">Mindset, Platform, Risk Management</p>
            </div>
            <div class="phase-status">
              <span class="phase-badge locked">
                <span class="icon icon-lock mr-1"></span>Locked
              </span>
            </div>
            <span class="chevron icon icon-chevron-right text-white transition-all"></span>
          </div>
        </div>
        
        <div class="phase-content">
          <div id="syllabus-phase-0-stats" class="phase-stats"></div>
          
          <div class="phase-lessons">
            <div class="lesson-item">
              <h4 class="font-semibold text-blue-900 mb-2">📖 Core Concepts</h4>
              <ul class="text-sm text-blue-800 space-y-1 ml-4">
                <li>• Deep skepticism and probabilistic thinking</li>
                <li>• Platform security and tool setup</li>
                <li>• Risk management mastery</li>
                <li>• Position sizing calculations</li>
              </ul>
            </div>
            <div class="mt-4">
              <div class="text-xs text-blue-700 mb-2">
                <span class="icon icon-target mr-1"></span>
                <strong>Goal:</strong> Build mental armor and technical foundation
              </div>
              <button class="complete-phase-btn" onclick="markPhaseComplete(0)">
                <span class="icon icon-check mr-1"></span>Mark Complete
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Discovery Phase -->
      <div id="syllabus-discovery" class="phase-card bg-gradient-to-br from-yellow-400 to-orange-500" data-phase="1">
        <div class="phase-header" onclick="togglePhase(1)">
          <div class="flex items-center gap-4">
            <span class="phase-icon icon icon-search text-2xl"></span>
            <div class="flex-1">
              <h3 class="text-xl font-bold text-white">Phase 2: Short Thesis & Discovery</h3>
              <p class="text-yellow-100 text-sm">Analysis, Red Flags, Market Research</p>
            </div>
            <div class="phase-status">
              <span class="phase-badge locked">
                <span class="icon icon-lock mr-1"></span>Locked
              </span>
            </div>
            <span class="chevron icon icon-chevron-right text-white transition-all"></span>
          </div>
        </div>
        
        <div class="phase-content">
          <div id="syllabus-phase-1-stats" class="phase-stats"></div>
          
          <div class="phase-lessons">
            <div class="lesson-item">
              <h4 class="font-semibold text-blue-900 mb-2">🔍 Discovery Skills</h4>
              <ul class="text-sm text-blue-800 space-y-1 ml-4">
                <li>• Failed hype cycle identification</li>
                <li>• Red flag and scam spotting</li>
                <li>• Tokenomics analysis</li>
                <li>• Sentiment analysis tools</li>
              </ul>
            </div>
            <div class="mt-4">
              <div class="text-xs text-blue-700 mb-2">
                <span class="icon icon-target mr-1"></span>
                <strong>Goal:</strong> Master market research and thesis development
              </div>
              <button class="complete-phase-btn" onclick="markPhaseComplete(1)">
                <span class="icon icon-check mr-1"></span>Mark Complete
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Execution Phase -->
      <div id="syllabus-execution" class="phase-card bg-gradient-to-br from-pink-400 to-red-500" data-phase="2">
        <div class="phase-header" onclick="togglePhase(2)">
          <div class="flex items-center gap-4">
            <span class="phase-icon icon icon-pen text-2xl"></span>
            <div class="flex-1">
              <h3 class="text-xl font-bold text-white">Phase 3: Execution & Journaling</h3>
              <p class="text-pink-100 text-sm">Trade Entry, Documentation, Process</p>
            </div>
            <div class="phase-status">
              <span class="phase-badge locked">
                <span class="icon icon-lock mr-1"></span>Locked
              </span>
            </div>
            <span class="chevron icon icon-chevron-right text-white transition-all"></span>
          </div>
        </div>
        
        <div class="phase-content">
          <div id="syllabus-phase-2-stats" class="phase-stats"></div>
          
          <div class="phase-lessons">
            <div class="lesson-item">
              <h4 class="font-semibold text-blue-900 mb-2">⚡ Execution Skills</h4>
              <ul class="text-sm text-blue-800 space-y-1 ml-4">
                <li>• Optimal entry point identification</li>
                <li>• Professional journaling methods</li>
                <li>• Trade documentation process</li>
                <li>• Performance tracking systems</li>
              </ul>
            </div>
            <div class="mt-4">
              <div class="text-xs text-blue-700 mb-2">
                <span class="icon icon-target mr-1"></span>
                <strong>Goal:</strong> Execute trades with precision and discipline
              </div>
              <button class="complete-phase-btn" onclick="markPhaseComplete(2)">
                <span class="icon icon-check mr-1"></span>Mark Complete
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Psychology Phase -->
      <div id="syllabus-psychology" class="phase-card bg-gradient-to-br from-purple-400 to-pink-500" data-phase="3">
        <div class="phase-header" onclick="togglePhase(3)">
          <div class="flex items-center gap-4">
            <span class="phase-icon icon icon-brain text-2xl"></span>
            <div class="flex-1">
              <h3 class="text-xl font-bold text-white">Phase 4: Advanced Scenarios & Psychology</h3>
              <p class="text-purple-100 text-sm">FOMO Control, Loss Management, Discipline</p>
            </div>
            <div class="phase-status">
              <span class="phase-badge locked">
                <span class="icon icon-lock mr-1"></span>Locked
              </span>
            </div>
            <span class="chevron icon icon-chevron-right text-white transition-all"></span>
          </div>
        </div>
        
        <div class="phase-content">
          <div id="syllabus-phase-3-stats" class="phase-stats"></div>
          
          <div class="phase-lessons">
            <div class="lesson-item">
              <h4 class="font-semibold text-blue-900 mb-2">🧠 Psychology Mastery</h4>
              <ul class="text-sm text-blue-800 space-y-1 ml-4">
                <li>• FOMO recognition and control</li>
                <li>• Loss handling and tilt prevention</li>
                <li>• Circuit breaker implementation</li>
                <li>• Emotional discipline systems</li>
              </ul>
            </div>
            <div class="mt-4">
              <div class="text-xs text-blue-700 mb-2">
                <span class="icon icon-target mr-1"></span>
                <strong>Goal:</strong> Develop unshakeable trading psychology
              </div>
              <button class="complete-phase-btn" onclick="markPhaseComplete(3)">
                <span class="icon icon-check mr-1"></span>Mark Complete
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Mastery Phase -->
      <div id="syllabus-mastery" class="phase-card bg-gradient-to-br from-yellow-400 to-green-400" data-phase="4">
        <div class="phase-header" onclick="togglePhase(4)">
          <div class="flex items-center gap-4">
            <span class="phase-icon icon icon-certificate text-2xl"></span>
            <div class="flex-1">
              <h3 class="text-xl font-bold text-white">Phase 5: Mastery & Peer Review</h3>
              <p class="text-yellow-100 text-sm">Certification, Community, Advanced Analysis</p>
            </div>
            <div class="phase-status">
              <span class="phase-badge locked">
                <span class="icon icon-lock mr-1"></span>Locked
              </span>
            </div>
            <span class="chevron icon icon-chevron-right text-white transition-all"></span>
          </div>
        </div>
        
        <div class="phase-content">
          <div id="syllabus-phase-4-stats" class="phase-stats"></div>
          
          <div class="phase-lessons">
            <div class="lesson-item">
              <h4 class="font-semibold text-blue-900 mb-2">🎓 Mastery Certification</h4>
              <ul class="text-sm text-blue-800 space-y-1 ml-4">
                <li>• Community engagement and peer review</li>
                <li>• Advanced pattern recognition</li>
                <li>• Final project and certification</li>
                <li>• Professional trader transition</li>
              </ul>
            </div>
            <div class="mt-4">
              <div class="text-xs text-blue-700 mb-2">
                <span class="icon icon-target mr-1"></span>
                <strong>Goal:</strong> Achieve professional trading certification
              </div>
              <button class="complete-phase-btn" onclick="markPhaseComplete(4)">
                <span class="icon icon-check mr-1"></span>Mark Complete
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Footer Tips -->
    <div class="mt-8 bg-blue-900 rounded-lg p-5 shadow-lg">
      <div class="flex items-center gap-3 mb-3">
        <span class="icon icon-rocket text-xl text-yellow-300"></span>
        <h3 class="text-lg font-bold text-white">Pro Tips for Success</h3>
      </div>
      <div class="text-blue-100 text-sm space-y-2">
        <p>• Complete phases in order for optimal learning progression</p>
        <p>• Practice with paper trading before going live</p>
        <p>• Join our community for peer support and advanced strategies</p>
      </div>
      <div class="mt-4 text-blue-200 text-xs">
        <span class="icon icon-fire mr-1"></span>
        Need more resources? Visit 
        <a href="https://www.babypips.com/" target="_blank" class="text-yellow-300 hover:text-green-300 underline">BabyPips School</a>
        and 
        <a href="https://www.tradingview.com/" target="_blank" class="text-yellow-300 hover:text-green-300 underline">TradingView Ideas</a>
      </div>
    </div>
  </div>
  <script>
    // === PHASE DEFINITIONS ===
    const SYLLABUS_PHASES = [
      {
        id: "syllabus-foundation",
        name: "The Foundation: Mindset, Platform, Risk",
        tradeReq: 3,
      },
      {
        id: "syllabus-discovery", 
        name: "Short Thesis & Discovery",
        tradeReq: 4,
      },
      {
        id: "syllabus-execution",
        name: "Execution & Journaling", 
        tradeReq: 5,
      },
      {
        id: "syllabus-psychology",
        name: "Advanced Scenarios & Psychology",
        tradeReq: 6,
      },
      {
        id: "syllabus-mastery",
        name: "Mastery & Peer Review", 
        tradeReq: 8,
      }
    ];

    // === GLOBAL PHASE INTERACTION FUNCTIONS ===
    function togglePhase(phaseIndex) {
      const phaseCard = document.querySelector(`[data-phase="${phaseIndex}"]`);
      const content = phaseCard.querySelector('.phase-content');
      const chevron = phaseCard.querySelector('.chevron');
      
      if (content.classList.contains('expanded')) {
        content.classList.remove('expanded');
        phaseCard.classList.remove('expanded');
      } else {
        // Close all other phases
        document.querySelectorAll('.phase-content.expanded').forEach(c => {
          c.classList.remove('expanded');
          c.closest('.phase-card').classList.remove('expanded');
        });
        
        // Open this phase
        content.classList.add('expanded');
        phaseCard.classList.add('expanded');
        
        // Update stats when opened
        updatePhaseStats(phaseIndex);
      }
    }

    function markPhaseComplete(phaseIndex) {
      let completed = JSON.parse(localStorage.getItem("syllabusCompletedPhases") || "[]");
      if (!completed.includes(phaseIndex)) {
        completed.push(phaseIndex);
        localStorage.setItem("syllabusCompletedPhases", JSON.stringify(completed));
        updateAllPhaseStates();
        showAchievementBadge(phaseIndex);
      }
    }

    function updatePhaseStats(phaseIndex) {
      const journal = getJournal();
      const entriesByPhase = assignEntriesToPhases(journal);
      const phase = SYLLABUS_PHASES[phaseIndex];
      const entries = entriesByPhase[phaseIndex] || [];
      
      const wins = entries.filter(e => e.outcome === "Win").length;
      const losses = entries.filter(e => e.outcome === "Loss").length;
      const breakevens = entries.filter(e => e.outcome === "Breakeven").length;
      const pnl = entries.reduce((sum, e) => sum + (parseFloat(e.pnl) || 0), 0);
      const progress = Math.min(1, entries.length / phase.tradeReq);
      
      const statsDiv = document.getElementById(`syllabus-phase-${phaseIndex}-stats`);
      if (statsDiv) {
        statsDiv.innerHTML = `
          <div class="stat-grid">
            <div class="stat-item">
              <div class="stat-label">Progress</div>
              <div class="stat-value">${entries.length}/${phase.tradeReq}</div>
            </div>
            <div class="stat-item">
              <div class="stat-label">Wins</div>
              <div class="stat-value positive">${wins}</div>
            </div>
            <div class="stat-item">
              <div class="stat-label">Losses</div>
              <div class="stat-value negative">${losses}</div>
            </div>
            <div class="stat-item">
              <div class="stat-label">Net P&L</div>
              <div class="stat-value ${pnl >= 0 ? 'positive' : 'negative'}">$${pnl.toFixed(2)}</div>
            </div>
          </div>
          <div class="w-full bg-blue-100 rounded-full h-2 mb-2">
            <div class="bg-gradient-to-r from-blue-500 to-green-500 h-2 rounded-full transition-all" style="width:${Math.round(progress * 100)}%"></div>
          </div>
          ${entries.length >= phase.tradeReq && !getCompleted().includes(phaseIndex) 
            ? '<div class="text-green-600 text-sm font-semibold">🎉 Phase unlocked! Mark complete to advance.</div>'
            : entries.length < phase.tradeReq 
            ? `<div class="text-blue-600 text-sm">📊 Log ${phase.tradeReq - entries.length} more trade${phase.tradeReq - entries.length > 1 ? 's' : ''} to unlock this phase.</div>`
            : ''}
        `;
      }
    }

    function updateAllPhaseStates() {
      const completed = getCompleted();
      const journal = getJournal();
      const entriesByPhase = assignEntriesToPhases(journal);
      
      SYLLABUS_PHASES.forEach((phase, index) => {
        const phaseCard = document.querySelector(`[data-phase="${index}"]`);
        const badge = phaseCard.querySelector('.phase-badge');
        const button = phaseCard.querySelector('.complete-phase-btn');
        const entries = entriesByPhase[index] || [];
        
        if (completed.includes(index)) {
          badge.className = 'phase-badge completed';
          badge.innerHTML = '<span class="icon icon-check mr-1"></span>Completed';
          button.className = 'complete-phase-btn completed';
          button.innerHTML = '<span class="icon icon-star mr-1"></span>Completed';
          phaseCard.style.background = 'linear-gradient(135deg, #facc15, #f59e0b)';
        } else if (entries.length >= phase.tradeReq) {
          badge.className = 'phase-badge unlocked';
          badge.innerHTML = '<span class="icon icon-unlock mr-1"></span>Unlocked';
        } else {
          badge.className = 'phase-badge locked';
          badge.innerHTML = '<span class="icon icon-lock mr-1"></span>Locked';
        }
        
        updatePhaseStats(index);
      });
      
      updateOverallProgress();
      updateAchievementBadges();
    }

    function updateOverallProgress() {
      const completed = getCompleted();
      const progress = Math.floor((completed.length / SYLLABUS_PHASES.length) * 100);
      
      const progressBar = document.getElementById('syllabus-progress-bar');
      const progressLabel = document.getElementById('syllabus-progress-label');
      
      if (progressBar) progressBar.style.width = progress + '%';
      if (progressLabel) progressLabel.textContent = progress + '% Complete';
    }

    function updateAchievementBadges() {
      const completed = getCompleted();
      const badgeContainer = document.getElementById('syllabus-completed-labels');
      
      if (badgeContainer) {
        badgeContainer.innerHTML = completed.map(index => {
          const phase = SYLLABUS_PHASES[index];
          return `<div class="achievement-badge">
            <span class="icon icon-trophy mr-2"></span>
            ${phase.name.split(':')[0]}
          </div>`;
        }).join('');
      }
    }

    function showAchievementBadge(phaseIndex) {
      // Create a temporary notification
      const notification = document.createElement('div');
      notification.className = 'fixed top-4 right-4 bg-gradient-to-r from-yellow-400 to-orange-500 text-white p-4 rounded-lg shadow-xl z-50';
      notification.innerHTML = `
        <div class="flex items-center gap-3">
          <span class="icon icon-trophy text-2xl"></span>
          <div>
            <div class="font-bold">Phase Completed!</div>
            <div class="text-sm opacity-90">${SYLLABUS_PHASES[phaseIndex].name.split(':')[0]}</div>
          </div>
        </div>
      `;
      
      document.body.appendChild(notification);
      
      setTimeout(() => {
        notification.remove();
      }, 4000);
    }

    // === HELPER FUNCTIONS ===
    function getCompleted() {
      return JSON.parse(localStorage.getItem("syllabusCompletedPhases") || "[]");
    }

    function getJournal() {
      try {
        const data = localStorage.getItem(window.JOURNAL_KEY || "griffinsrise_journal_v1");
        return data ? JSON.parse(data) : [];
      } catch { return []; }
    }

    function assignEntriesToPhases(journal) {
      const entriesByPhase = SYLLABUS_PHASES.map(() => []);
      let tradeIdx = 0;
      
      for (const entry of journal) {
        let phaseIdx = typeof entry.phase === "number" ? entry.phase : null;
        
        if (phaseIdx == null) {
          // Auto-assign by order
          let running = 0;
          for (let i = 0; i < SYLLABUS_PHASES.length; i++) {
            running += SYLLABUS_PHASES[i].tradeReq;
            if (tradeIdx < running) {
              phaseIdx = i;
              break;
            }
          }
          if (phaseIdx == null) phaseIdx = SYLLABUS_PHASES.length - 1;
        }
        
        if (entriesByPhase[phaseIdx]) entriesByPhase[phaseIdx].push(entry);
        tradeIdx++;
      }
      
      return entriesByPhase;
    }

    // === INITIALIZATION ===
    document.addEventListener("DOMContentLoaded", function() {
      // Setup reset button
      const resetBtn = document.getElementById('syllabus-reset-btn');
      if (resetBtn) {
        resetBtn.onclick = function() {
          if (confirm("Are you sure you want to reset your syllabus progress? This cannot be undone.")) {
            localStorage.removeItem("syllabusCompletedPhases");
            updateAllPhaseStates();
          }
        };
      }
      
      // Initialize phase states
      updateAllPhaseStates();
      
      // Listen for journal changes
      window.addEventListener("journalChanged", updateAllPhaseStates);
      setInterval(updateAllPhaseStates, 10000); // Update every 10 seconds
    });
  </script>
</section>  
<!-- Training Manual -->
<!-- Training Manual Section: Professional Pro Edition -->
<section id="trainingManualContent" class="hidden">
  <div class="max-w-6xl mx-auto p-6">
    <!-- Header Section -->
    <div class="bg-gradient-to-r from-yellow-400 to-orange-500 rounded-xl p-6 mb-8 shadow-xl">
      <div class="flex items-center gap-4 mb-4">
        <span class="icon icon-book text-3xl text-white"></span>
        <h2 class="text-3xl font-extrabold text-white flex-1">Training Manual: Short Thesis Mastery</h2>
        <span class="bg-white bg-opacity-20 text-white px-4 py-2 rounded-full text-sm font-bold">Pro Guide</span>
      </div>
      <p class="text-white text-lg opacity-90">Step-by-step actionable lessons for professional trading mastery</p>
    </div>

    <!-- Phase Cards -->
    <div class="space-y-8">
      <!-- Phase 1: Foundation -->
      <div class="bg-gradient-to-br from-green-400 to-blue-500 rounded-xl p-6 shadow-xl">
        <div class="flex items-center gap-4 mb-6">
          <span class="icon icon-cubes text-3xl text-white"></span>
          <div class="flex-1">
            <h3 class="text-2xl font-bold text-white">Phase 1: The Foundation</h3>
            <p class="text-green-100">Build your mental armor and trading infrastructure</p>
          </div>
        </div>
        
        <div class="space-y-6">
          <!-- Lesson 1 -->
          <div class="bg-white bg-opacity-95 rounded-lg p-5">
            <h4 class="text-xl font-bold text-blue-900 mb-3 flex items-center gap-2">
              <span class="icon icon-brain"></span>
              Lesson 1: Foundation, Mindset, & Platform Choices
            </h4>
            <p class="text-blue-700 mb-4">This lesson builds your mental armor and understanding of the battlefield.</p>
            
            <div class="space-y-4">
              <div class="border-l-4 border-blue-500 pl-4">
                <h5 class="font-semibold text-blue-900 mb-2">Task 1: Internalize Deep Skepticism</h5>
                <div class="text-sm text-blue-800 space-y-1">
                  <p>• Open www.x.com (formerly Twitter) and search for #memecoin or #1000xgem</p>
                  <p>• Click the 'Latest' tab to see new posts; find a post with high engagement promoting a coin</p>
                  <p>• Search for the coin's official website. In your journal, write three skeptical questions</p>
                  <div class="mt-2 p-3 bg-blue-50 rounded italic text-xs">
                    Example: "The website claims 'AI-powered decentralization.' Where is the technical whitepaper that explains this? Which AI models? How is it different from existing projects?"
                  </div>
                </div>
              </div>
              
              <div class="border-l-4 border-green-500 pl-4">
                <h5 class="font-semibold text-blue-900 mb-2">Task 2: Internalize Probabilistic Thinking</h5>
                <div class="text-sm text-blue-800 space-y-1">
                  <p>• Read the "Probabilistic Thinking" resource from the syllabus</p>
                  <p>• In your journal, complete: "Being a probabilistic trader means I accept that I can do everything right and still lose a trade... My goal is to be profitable over a large series of trades because my winners will outweigh my losers."</p>
                </div>
              </div>
              
              <div class="border-l-4 border-purple-500 pl-4">
                <h5 class="font-semibold text-blue-900 mb-2">Task 3: Learn to Formulate a Short Thesis</h5>
                <div class="text-sm text-blue-800 space-y-1">
                  <p>• Go to www.coingecko.com. Find and add the '% ATH' column if needed</p>
                  <p>• Click '% ATH' twice to sort by largest drops. Find a coin with recognizable name and 24h volume > $500,000</p>
                  <p>• In your journal, write a one-sentence short thesis for a coin you find</p>
                  <div class="mt-2 p-3 bg-purple-50 rounded italic text-xs">
                    Example: "The short thesis for ExampleCoin (EXC) is that it was a failed hype cycle, confirmed by a 95% price collapse on declining volume."
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Lesson 2 -->
          <div class="bg-white bg-opacity-95 rounded-lg p-5">
            <h4 class="text-xl font-bold text-blue-900 mb-3 flex items-center gap-2">
              <span class="icon icon-target"></span>
              Lesson 2: Risk Management Mastery
            </h4>
            <p class="text-blue-700 mb-4">This is the science of survival. 👨‍🔬</p>
            
            <div class="border-l-4 border-red-500 pl-4">
              <h5 class="font-semibold text-blue-900 mb-2">Task: Master Position Sizing</h5>
              <div class="text-sm text-blue-800 space-y-1">
                <p>• Open the BabyPips Position Size Calculator from the syllabus resources</p>
                <p>• Scenario: $10,000 account, risk 1% on SOL short, enter at $150, stop-loss at $153</p>
                <p>• In calculator: Account Currency USD, Balance 10000, Risk% 1, Stop Loss (pips) 3000 (since $3 = 3000 pips), Entry Price 150</p>
                <p>• Calculator gives position size—amount of SOL to short to risk only $100</p>
                <p>• Do the three sample trades from the syllabus in your journal</p>
              </div>
            </div>
          </div>

          <!-- Lesson 3 -->
          <div class="bg-white bg-opacity-95 rounded-lg p-5">
            <h4 class="text-xl font-bold text-blue-900 mb-3 flex items-center gap-2">
              <span class="icon icon-rocket"></span>
              Lesson 3: Platform Mastery & Tool Setup
            </h4>
            <p class="text-blue-700 mb-4">This is your pre-flight checklist. 🚀</p>
            
            <div class="space-y-4">
              <div class="border-l-4 border-yellow-500 pl-4">
                <h5 class="font-semibold text-blue-900 mb-2">Task 1: Secure Your CeFi Account (MEXC)</h5>
                <div class="text-sm text-blue-800 space-y-1">
                  <p>• Log into MEXC. Go to 'Security' under your profile</p>
                  <p>• Setup MEXC/Google Authenticator and back up your security key</p>
                </div>
              </div>
              
              <div class="border-l-4 border-indigo-500 pl-4">
                <h5 class="font-semibold text-blue-900 mb-2">Task 2: Secure Your DeFi Wallet (Ledger + MetaMask)</h5>
                <div class="text-sm text-blue-800 space-y-1">
                  <p>• Plug in Ledger, unlock, and open Ethereum app</p>
                  <p>• Unlock MetaMask. Click the circle icon, select "Connect Hardware Wallet", choose Ledger</p>
                  <p>• Select your Ledger ETH address in MetaMask; connect it to Hyperliquid</p>
                  <p class="text-red-600 font-semibold">• Store your Ledger 24-word Recovery Phrase offline, never digitally</p>
                </div>
              </div>
              
              <div class="border-l-4 border-green-500 pl-4">
                <h5 class="font-semibold text-blue-900 mb-2">Task 3: Place a Test Order</h5>
                <div class="text-sm text-blue-800 space-y-1">
                  <p>• On MEXC Futures, select BTC/USDT, use Limit order, price far from current, minimum amount, click Sell/Short, then Cancel</p>
                  <p>• Repeat on Hyperliquid; approve via Ledger device when prompted</p>
                </div>
              </div>
            </div>
          </div>

          <!-- Applied Module 1 -->
          <div class="bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg p-5 text-white">
            <h4 class="text-xl font-bold mb-3 flex items-center gap-2">
              <span class="icon icon-diamond"></span>
              Applied Learning Module 1: Anatomy of a World-Class Short
            </h4>
            <p class="mb-4 opacity-90">Goal: Synthesize foundation lessons to build a high-conviction trade plan.</p>
            
            <div class="space-y-3 text-sm">
              <div class="bg-white bg-opacity-20 rounded p-3">
                <strong>Target Acquisition:</strong> On CoinGecko, filter for 24h Volume > $2M, find Aetherium Prime ($AEP), down 82% from ATH, $5M volume.
              </div>
              <div class="bg-white bg-opacity-20 rounded p-3">
                <strong>Investigation:</strong>
                <ul class="mt-2 space-y-1 ml-4">
                  <li>• <strong>Narrative & Sentiment:</strong> On LunarCrush, $AEP's social metrics have flatlined, sentiment is bearish</li>
                  <li>• <strong>Tokenomics:</strong> On token.unlocks.app, 20% supply unlock in 2 weeks—a bearish catalyst</li>
                  <li>• <strong>Insider Wallets:</strong> On Arkham Intelligence, a VC wallet is preparing to sell</li>
                </ul>
              </div>
              <div class="bg-white bg-opacity-20 rounded p-3">
                <strong>Synthesis:</strong> Write a thesis: "$AEP is a failed story coin, retail hype has died, and a 20% supply unlock for VCs is confirmed by on-chain prep to sell. High-probability short."
              </div>
              <div class="bg-white bg-opacity-20 rounded p-3">
                <strong>Tactical Plan:</strong> Chart: AEP/USDT on MEXC | Entry: Limit sell at $2.00 | Stop-Loss: $2.20 | Position Size: 1% of $10,000 = 500 AEP
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Phase 2: Short Thesis & Discovery -->
      <div class="bg-gradient-to-br from-yellow-400 to-orange-500 rounded-xl p-6 shadow-xl">
        <div class="flex items-center gap-4 mb-6">
          <span class="icon icon-search text-3xl text-white"></span>
          <div class="flex-1">
            <h3 class="text-2xl font-bold text-white">Phase 2: Short Thesis & Discovery</h3>
            <p class="text-yellow-100">Master market research and red flag identification</p>
          </div>
        </div>

        <div class="space-y-6">
          <!-- Lesson 4 -->
          <div class="bg-white bg-opacity-95 rounded-lg p-5">
            <h4 class="text-xl font-bold text-blue-900 mb-3 flex items-center gap-2">
              <span class="icon icon-search"></span>
              Lesson 4: Short Thesis Discovery & Analysis
            </h4>
            
            <div class="border-l-4 border-orange-500 pl-4">
              <h5 class="font-semibold text-blue-900 mb-2">Task: Discover a "Failed Hype Cycle" Candidate</h5>
              <div class="text-sm text-blue-800 space-y-1">
                <p>• Go to www.dexscreener.com, click 'New Pairs'</p>
                <p>• Sort by '1h' gainers. Look for tokens up 500%+ with age a few hours</p>
                <p>• Bookmark and revisit in 24-48h. If price collapses, analyze in your journal</p>
              </div>
            </div>
          </div>

          <!-- Lesson 5 -->
          <div class="bg-white bg-opacity-95 rounded-lg p-5">
            <h4 class="text-xl font-bold text-blue-900 mb-3 flex items-center gap-2">
              <span class="icon icon-fire"></span>
              Lesson 5: Red Flags & Scam Spotting
            </h4>
            
            <div class="border-l-4 border-red-500 pl-4">
              <h5 class="font-semibold text-blue-900 mb-2">Task: Spot a "Rug Pull" Red Flag</h5>
              <div class="text-sm text-blue-800 space-y-1">
                <p>• Find a new token on Dexscreener</p>
                <p>• Look for 'Liquidity is Locked'. Red box warnings about unlocked liquidity or high holder concentration are major red flags</p>
                <p>• Screenshot and journal the red flag</p>
              </div>
            </div>
          </div>

          <!-- Applied Module 2 -->
          <div class="bg-gradient-to-r from-red-500 to-pink-600 rounded-lg p-5 text-white">
            <h4 class="text-xl font-bold mb-3 flex items-center gap-2">
              <span class="icon icon-fire"></span>
              Applied Learning Module 2: A Tale of Two Red Flags
            </h4>
            <div class="space-y-3 text-sm">
              <div class="bg-white bg-opacity-20 rounded p-3">
                <strong>Case 1:</strong> The "Honeypot" Scam — No SELL transactions, only BUYs, Dexscreener flags. "Too good to be true" = trap.
              </div>
              <div class="bg-white bg-opacity-20 rounded p-3">
                <strong>Case 2:</strong> The "Slow Rug" — DeFi project down 95%, abandoned social, devs slowly cashing out. Journal these findings.
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Phase 3: Execution & Journaling -->
      <div class="bg-gradient-to-br from-pink-400 to-red-500 rounded-xl p-6 shadow-xl">
        <div class="flex items-center gap-4 mb-6">
          <span class="icon icon-pen text-3xl text-white"></span>
          <div class="flex-1">
            <h3 class="text-2xl font-bold text-white">Phase 3: Execution & Journaling</h3>
            <p class="text-pink-100">Execute trades with precision and document everything</p>
          </div>
        </div>

        <div class="space-y-6">
          <!-- Lesson 6 -->
          <div class="bg-white bg-opacity-95 rounded-lg p-5">
            <h4 class="text-xl font-bold text-blue-900 mb-3 flex items-center gap-2">
              <span class="icon icon-target"></span>
              Lesson 6: Short Entry Execution
            </h4>
            
            <div class="border-l-4 border-pink-500 pl-4">
              <h5 class="font-semibold text-blue-900 mb-2">Task: Identify an Optimal Entry Point</h5>
              <div class="text-sm text-blue-800 space-y-1">
                <p>• On TradingView, load a pump-and-dump token's 1H chart</p>
                <p>• Mark horizontal support where price bounced up</p>
                <p>• Find where price crashed below that line (broken support)</p>
                <p>• Optimal short entry is often a retest of the broken support from below</p>
              </div>
            </div>
          </div>

          <!-- Lesson 7 -->
          <div class="bg-white bg-opacity-95 rounded-lg p-5">
            <h4 class="text-xl font-bold text-blue-900 mb-3 flex items-center gap-2">
              <span class="icon icon-book"></span>
              Lesson 7: Journaling for Improvement
            </h4>
            <p class="text-blue-700 mb-4">This is the most important habit of any professional trader.</p>
            
            <div class="border-l-4 border-blue-500 pl-4">
              <div class="text-sm text-blue-800 space-y-1">
                <p>• In a spreadsheet, create columns: Date, Asset, Thesis, Entry, SL, TP, Position Size, Outcome (W/L), P&L ($), Emotion/Psychology, Mistakes/Lessons</p>
                <p>• After every trade, fill out the journal—be honest, especially about emotions and lessons</p>
              </div>
            </div>
          </div>

          <!-- Applied Module 3 -->
          <div class="bg-gradient-to-r from-green-500 to-blue-600 rounded-lg p-5 text-white">
            <h4 class="text-xl font-bold mb-3 flex items-center gap-2">
              <span class="icon icon-check"></span>
              Applied Learning Module 3: From Plan to Action
            </h4>
            <div class="space-y-3 text-sm">
              <div class="bg-white bg-opacity-20 rounded p-3">
                <strong>Scenario:</strong> $AEP trade plan is active. Price rallies to $2.00.
              </div>
              <div class="bg-white bg-opacity-20 rounded p-3">
                <strong>Execution:</strong> On MEXC, Limit Sell 500 AEP at $2.00, TP $1.20, SL $2.20.
              </div>
              <div class="bg-white bg-opacity-20 rounded p-3">
                <strong>Outcome:</strong> TP hit at $1.20, +$400 profit.
              </div>
              <div class="bg-white bg-opacity-20 rounded p-3">
                <strong>Journaling:</strong> Asset: $AEP, Thesis: "Failed hype + VC unlock", Entry: $2.00, SL: $2.20, TP: $1.20, Outcome: Win, P&L: $400, Emotion: "Anxious, but trusted plan", Lesson: "Research edge is key."
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Phase 4: Advanced Scenarios & Psychology -->
      <div class="bg-gradient-to-br from-purple-400 to-pink-500 rounded-xl p-6 shadow-xl">
        <div class="flex items-center gap-4 mb-6">
          <span class="icon icon-brain text-3xl text-white"></span>
          <div class="flex-1">
            <h3 class="text-2xl font-bold text-white">Phase 4: Advanced Scenarios & Psychology</h3>
            <p class="text-purple-100">Master your mind and control your emotions</p>
          </div>
        </div>

        <div class="space-y-6">
          <!-- Lesson 8 -->
          <div class="bg-white bg-opacity-95 rounded-lg p-5">
            <h4 class="text-xl font-bold text-blue-900 mb-3 flex items-center gap-2">
              <span class="icon icon-brain"></span>
              Lesson 8: Trader Psychology & FOMO
            </h4>
            
            <div class="border-l-4 border-purple-500 pl-4">
              <h5 class="font-semibold text-blue-900 mb-2">Task: Document FOMO</h5>
              <div class="text-sm text-blue-800">
                <p>When you feel the urge to chase a pump, pause and journal the feeling. Recognizing FOMO is the first step to control.</p>
              </div>
            </div>
          </div>

          <!-- Lesson 9 -->
          <div class="bg-white bg-opacity-95 rounded-lg p-5">
            <h4 class="text-xl font-bold text-blue-900 mb-3 flex items-center gap-2">
              <span class="icon icon-fire"></span>
              Lesson 9: Dealing with Losses & Tilt
            </h4>
            
            <div class="border-l-4 border-red-500 pl-4">
              <h5 class="font-semibold text-blue-900 mb-2">Task: Create a "Circuit Breaker"</h5>
              <div class="text-sm text-blue-800">
                <p><strong>Example Rule:</strong> "If I lose 3 trades in a row, OR my account is down 2% in a day, I will shut down and not trade for 24h. No exceptions."</p>
              </div>
            </div>
          </div>

          <!-- Applied Module 4 -->
          <div class="bg-gradient-to-r from-red-500 to-purple-600 rounded-lg p-5 text-white">
            <h4 class="text-xl font-bold mb-3 flex items-center gap-2">
              <span class="icon icon-fire"></span>
              Applied Learning Module 4: The Losing Trade
            </h4>
            <div class="space-y-3 text-sm">
              <div class="bg-white bg-opacity-20 rounded p-3">
                <strong>Scenario:</strong> Short thesis on $BETA, but surprise positive news hits. Stop-loss triggered, lose 1%.
              </div>
              <div class="bg-white bg-opacity-20 rounded p-3">
                <strong>Psych Response:</strong> Initial anger, urge to revenge trade.
              </div>
              <div class="bg-white bg-opacity-20 rounded p-3">
                <strong>Professional Process:</strong> Recognize emotion → execute "circuit breaker" → log out → journal trade and feelings.
              </div>
              <div class="bg-white bg-opacity-20 rounded p-3">
                <strong>Lesson:</strong> Losses happen outside your control. Journaling turns emotion into lesson and reinforces discipline.
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Phase 5: Mastery & Peer Review -->
      <div class="bg-gradient-to-br from-yellow-400 to-green-400 rounded-xl p-6 shadow-xl">
        <div class="flex items-center gap-4 mb-6">
          <span class="icon icon-certificate text-3xl text-white"></span>
          <div class="flex-1">
            <h3 class="text-2xl font-bold text-white">Phase 5: Mastery & Peer Review</h3>
            <p class="text-yellow-100">Achieve certification and join the professional community</p>
          </div>
        </div>

        <div class="space-y-6">
          <!-- Lesson 10 -->
          <div class="bg-white bg-opacity-95 rounded-lg p-5">
            <h4 class="text-xl font-bold text-blue-900 mb-3 flex items-center gap-2">
              <span class="icon icon-star"></span>
              Lesson 10: Peer Review & Community
            </h4>
            
            <div class="border-l-4 border-green-500 pl-4">
              <div class="text-sm text-blue-800 space-y-1">
                <p>• Go to TradingView > Community or Ideas tab</p>
                <p>• Find a published short idea for crypto. Read and critique in your journal</p>
                <div class="mt-2 p-3 bg-green-50 rounded italic text-xs">
                  Example: "Good bearish pattern, but thesis lacks tokenomics. Stop-loss too wide, poor R:R."
                </div>
              </div>
            </div>
          </div>

          <!-- Lesson 11 -->
          <div class="bg-white bg-opacity-95 rounded-lg p-5">
            <h4 class="text-xl font-bold text-blue-900 mb-3 flex items-center gap-2">
              <span class="icon icon-certificate"></span>
              Lesson 11: Final Project & Certification
            </h4>
            
            <div class="border-l-4 border-yellow-500 pl-4">
              <h5 class="font-semibold text-blue-900 mb-2">Task: Achieve Professional Certification</h5>
              <div class="text-sm text-blue-800">
                <p>Paper trade for 1 month. Log at least 10-15 trades with full journal entries. Review best/worst trades and write your final report as per syllabus. This is your certification for live trading.</p>
              </div>
            </div>
          </div>

          <!-- Applied Module 5 -->
          <div class="bg-gradient-to-r from-green-500 to-yellow-500 rounded-lg p-5 text-white">
            <h4 class="text-xl font-bold mb-3 flex items-center gap-2">
              <span class="icon icon-trophy"></span>
              Applied Learning Module 5: From Trader to Analyst
            </h4>
            <div class="space-y-3 text-sm">
              <div class="bg-white bg-opacity-20 rounded p-3">
                <strong>Scenario:</strong> End of certification month, 12 paper trades, 7 winners, 5 losers, net P&L positive.
              </div>
              <div class="bg-white bg-opacity-20 rounded p-3">
                <strong>Report:</strong> Analyze one winning, one losing trade. Focus on execution and process, not outcome.
              </div>
              <div class="bg-white bg-opacity-20 rounded p-3">
                <strong>Reflection:</strong> "My biggest lesson: My job is to be a risk manager, not a predictor. Profits came from discipline and cutting losses. I am now ready for live trading with a professional process."
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <div class="mt-12 bg-blue-900 rounded-xl p-6 shadow-lg text-center">
      <div class="flex items-center justify-center gap-3 mb-4">
        <span class="icon icon-rocket text-2xl text-yellow-300"></span>
        <h3 class="text-xl font-bold text-white">Your Trading Edge</h3>
      </div>
      <p class="text-blue-100 text-lg mb-2">This manual is your edge. Revisit before every big trade.</p>
      <div class="flex items-center justify-center gap-2 text-yellow-300">
        <span class="icon icon-diamond"></span>
        <span class="text-sm font-semibold">Pro Edition • Advanced Trading Mastery</span>
        <span class="icon icon-diamond"></span>
      </div>
    </div>
  </div>
  <!-- FontAwesome for icons -->
  <style>
    .manual-section ul { margin-bottom: 0; }
    .manual-section h3 { letter-spacing: 0.01em; }
    .manual-section { font-family: 'Montserrat', system-ui, sans-serif; }
    .manual-section h4 { margin-top: 0.75rem; }
    .manual-section ol, .manual-section ul { margin-top: 0.3rem; }
  </style>
</section>
<!-- Trading Journal & Syllabus Pro: Now with Dashboard Sync -->
<section id="journalContent" class="hidden">
  <div class="manual-section p-8 rounded-xl shadow mb-8 mx-auto" style="max-width:100rem;">

    <!-- HEADER + BADGES/PROGRESS -->
    <div class="flex flex-col md:flex-row items-center gap-8">
      <div class="md:w-2/3">
        <h2 class="text-3xl font-extrabold mb-3 text-blue-200">Trading Journal</h2>
        <ul class="mt-4 list-disc ml-8 text-blue-50 text-base space-y-1">
          <li>Log every trade with full details, outcome, emotions, and lessons learned.</li>
          <li>Phase progress and badges unlock as you journal. See your stats, compete on the leaderboard!</li>
        </ul>
        <div class="mt-6 bg-blue-700/80 border-l-4 border-blue-300 px-4 py-3 rounded">
          <b class="text-yellow-100">Tip:</b>
          <span class="text-blue-100">
            Consistent journaling is the #1 habit of professional traders. Use this as your edge!
          </span>
        </div>
      </div>
      <div class="md:w-1/3 flex flex-col items-center gap-3">
        <div class="w-full mb-3">
          <div class="flex items-center gap-2 mb-1">
            <span class="text-yellow-100 font-bold text-base"><i class="fas fa-chart-line"></i> Progress</span>
            <span id="journal-progress-label" class="ml-auto text-blue-200 text-xs"></span>
          </div>
          <div class="w-full bg-blue-900/60 rounded-full h-6 shadow relative">
            <div id="journal-progress-bar" class="bg-gradient-to-r from-yellow-400 to-green-300 h-6 rounded-full transition-all" style="width:0%"></div>
          </div>
        </div>
        <div class="flex flex-wrap gap-2 justify-center mt-1" id="journal-badges"></div>
      </div>
    </div>

    <!-- PHASES & PHASE-STATS -->
    <div class="mt-8 mb-8 p-6 rounded-xl bg-[#21243b] border border-blue-900 shadow-lg" style="max-width:64rem;margin:auto;">
      <h3 class="text-xl font-bold text-yellow-100 flex items-center gap-2 mb-3"><i class="fas fa-graduation-cap"></i> Syllabus Phase Progress</h3>
      <div id="syllabus-phase-list" class="flex flex-col gap-4"></div>
      <div class="mt-6">
        <h4 class="text-lg text-blue-100 font-bold mb-2 flex items-center gap-2"><i class="fas fa-chart-pie"></i> Phase-Specific Journal Stats</h4>
        <div id="phase-journal-stats" class="flex flex-wrap gap-4"></div>
      </div>
    </div>

    <!-- LEADERBOARD -->
    <div class="mt-2 mb-8 p-6 rounded-xl bg-[#181e2a] border border-blue-900 shadow-lg" style="max-width:64rem;margin:auto;">
      <h3 class="text-lg font-bold text-yellow-100 flex items-center gap-2 mb-3"><i class="fas fa-trophy"></i> Leaderboard: Top Journalers (Device Only)</h3>
      <div id="journal-leaderboard" class="flex flex-col gap-1"></div>
      <div class="text-xs text-blue-100 mt-2">* This leaderboard is stored only in your browser (local device/sandbox).</div>
    </div>

    <!-- JOURNAL ENTRY FORM -->
    <div class="mt-12 mb-6 bg-[#232946] p-6 rounded-lg border border-blue-900 shadow-2xl mx-auto"
         style="max-width:80rem;min-width:340px;overflow-x:auto;">
      <h3 class="text-xl font-bold text-blue-100 mb-4">New Trade Entry</h3>
      <form id="journalForm" class="grid grid-cols-1 md:grid-cols-4 gap-4 journal-form" autocomplete="off">
        <div>
          <label class="block mb-1" for="journal-date">Date</label>
          <input type="date" id="journal-date" required class="w-full" />
        </div>
        <div>
          <label class="block mb-1" for="journal-asset">Asset</label>
          <input type="text" id="journal-asset" placeholder="e.g. BTC/USDT" required class="w-full" />
        </div>
        <div>
          <label class="block mb-1" for="journal-direction">Direction</label>
          <select id="journal-direction" required class="w-full">
            <option value="Long">Long</option>
            <option value="Short">Short</option>
          </select>
        </div>
        <div>
          <label class="block mb-1" for="journal-phase">Phase</label>
          <select id="journal-phase" required class="w-full">
            <option value="Foundation">Foundation</option>
            <option value="Short Thesis & Discovery">Short Thesis & Discovery</option>
            <option value="Execution & Journaling">Execution & Journaling</option>
            <option value="Advanced Scenarios & Psychology">Advanced Scenarios & Psychology</option>
            <option value="Mastery & Peer Review">Mastery & Peer Review</option>
          </select>
        </div>
        <div>
          <label class="block mb-1" for="journal-thesis">Trade Thesis</label>
          <input type="text" id="journal-thesis" placeholder="Brief reason" required class="w-full" />
        </div>
        <div>
          <label class="block mb-1" for="journal-entry">Entry Price</label>
          <input type="number" step="any" id="journal-entry" required class="w-full" min="0.00000001" />
        </div>
        <div>
          <label class="block mb-1" for="journal-exit">Exit Price</label>
          <input type="number" step="any" id="journal-exit" required class="w-full" min="0.00000001" />
        </div>
        <div>
          <label class="block mb-1" for="journal-sl">Stop Loss</label>
          <input type="number" step="any" id="journal-sl" class="w-full" min="0" />
        </div>
        <div>
          <label class="block mb-1" for="journal-tp">Take Profit</label>
          <input type="number" step="any" id="journal-tp" class="w-full" min="0" />
        </div>
        <div>
          <label class="block mb-1" for="journal-size">Position Size</label>
          <input type="number" step="any" id="journal-size" required class="w-full" min="0.00000001" />
        </div>
        <div>
          <label class="block mb-1" for="journal-outcome">Outcome</label>
          <select id="journal-outcome" required class="w-full">
            <option value="Win">Win</option>
            <option value="Loss">Loss</option>
            <option value="Breakeven">Breakeven</option>
          </select>
        </div>
        <div>
          <label class="block mb-1" for="journal-pnl">P&amp;L ($)</label>
          <input type="number" step="any" id="journal-pnl" readonly tabindex="-1" style="background: #28304a !important; opacity:0.7;" class="w-full" />
        </div>
        <div>
          <label class="block mb-1" for="journal-emotion">Emotion/Psychology</label>
          <input type="text" id="journal-emotion" placeholder="e.g. FOMO, confident..." class="w-full" />
        </div>
        <div class="md:col-span-4">
          <label class="block mb-1" for="journal-mistakes">Mistakes/Lessons Learned</label>
          <textarea id="journal-mistakes" rows="2" class="w-full"></textarea>
        </div>
        <div class="md:col-span-4 flex gap-2 mt-2 flex-wrap justify-end min-w-[320px]">
          <button type="submit" class="bg-blue-700 hover:bg-blue-800 text-white font-bold px-6 py-2 rounded shadow transition">Add Entry</button>
          <button type="button" id="journalClearBtn" class="bg-red-600 hover:bg-red-700 text-white font-bold px-6 py-2 rounded shadow transition ml-2" title="Clear all journal entries">Clear All</button>
          <button type="button" id="journalExportBtn" class="bg-yellow-500 hover:bg-yellow-600 text-blue-900 font-bold px-6 py-2 rounded shadow transition ml-2" title="Export journal to CSV">Export CSV</button>
        </div>
        <div id="journal-message" class="col-span-4 mt-2 text-green-300 font-semibold"></div>
      </form>
    </div>
<!-- JOURNAL TABLE & FILTERS -->
<div class="mb-6 flex flex-col md:flex-row gap-8 items-center">
  <div class="w-full md:w-2/3">
    <div class="bg-blue-900/80 border-l-4 border-blue-400 px-4 py-3 rounded text-blue-100 font-mono font-semibold mb-2">
      <span id="journal-progress">No entries yet.</span>
    </div>
  </div>
  <div class="w-full md:w-1/3">
    <div class="flex gap-2 items-center justify-end">
      <label for="journal-filter-phase" class="text-blue-100">Phase:</label>
      <select id="journal-filter-phase" class="px-2 py-1 rounded">
        <option value="All">All</option>
        <option value="Foundation">Foundation</option>
        <option value="Short Thesis & Discovery">Short Thesis & Discovery</option>
        <option value="Execution & Journaling">Execution & Journaling</option>
        <option value="Advanced Scenarios & Psychology">Advanced Scenarios & Psychology</option>
        <option value="Mastery & Peer Review">Mastery & Peer Review</option>
      </select>
      <label for="journal-filter-outcome" class="text-blue-100 ml-2">Filter:</label>
      <select id="journal-filter-outcome" class="px-2 py-1 rounded">
        <option value="All">All</option>
        <option value="Win">Wins</option>
        <option value="Loss">Losses</option>
        <option value="Breakeven">Breakeven</option>
      </select>
    </div>
  </div>
</div>
<!-- PASTE THE TABLE BLOCK RIGHT HERE! -->
<div class="overflow-x-auto mt-3">
  <table class="min-w-full bg-[#181e2a] rounded-lg overflow-x-auto text-blue-100">
    <thead>
      <tr>
        <th>Date</th>
        <th>Asset</th>
        <th>Direction</th>
        <th>Phase</th>
        <th>Thesis</th>
        <th>Entry</th>
        <th>Exit</th>
        <th>SL</th>
        <th>TP</th>
        <th>Size</th>
        <th>Outcome</th>
        <th>PNL</th>
        <th>Emotion</th>
        <th>Mistakes</th>
      </tr>
    </thead>
    <tbody id="journal-table-body"></tbody>
  </table>
</div>
</section>
 <!-- Dashboard -->
<!-- DASHBOARD SECTION: Clean, Synced, Standalone, Paste-Ready -->
<section id="dashboardContent" class="hidden">
  <div class="dashboard-section p-8 rounded-xl shadow mb-8 mx-auto max-w-7xl">
    <h2 class="text-3xl font-extrabold mb-3 text-blue-200">Dashboard Overview</h2>
    <ul class="mt-4 list-disc ml-8 text-blue-50 text-base space-y-1">
      <li>Visualize your trading performance, risk, and consistency.</li>
      <li>Interactive filters and analytics—see stats by date, asset, or direction.</li>
      <li>Charts are large and styled for professional clarity.</li>
    </ul>
    <div class="mt-6 bg-blue-700/80 border-l-4 border-blue-300 px-4 py-3 rounded">
      <b class="text-yellow-100">Tip:</b>
      <span class="text-blue-100">
        Use the Dashboard to spot your edge, weaknesses, and review after every session!
      </span>
    </div>

    <!-- FILTERS -->
    <div class="mt-10 mb-8 flex flex-wrap gap-4 items-center bg-blue-800/70 rounded-lg p-4">
      <label class="text-blue-100 font-semibold" for="db-filter-asset">Asset:</label>
      <select id="db-filter-asset" class="px-2 py-1 rounded text-base bg-blue-900 text-blue-100 border border-blue-700"></select>
      <label class="text-blue-100 font-semibold" for="db-filter-direction">Direction:</label>
      <select id="db-filter-direction" class="px-2 py-1 rounded text-base bg-blue-900 text-blue-100 border border-blue-700">
        <option value="">All</option>
        <option value="Long">Long</option>
        <option value="Short">Short</option>
      </select>
      <label class="text-blue-100 font-semibold" for="db-filter-datefrom">From:</label>
      <input type="date" id="db-filter-datefrom" class="px-2 py-1 rounded text-base bg-blue-900 text-blue-100 border border-blue-700"/>
      <label class="text-blue-100 font-semibold" for="db-filter-dateto">To:</label>
      <input type="date" id="db-filter-dateto" class="px-2 py-1 rounded text-base bg-blue-900 text-blue-100 border border-blue-700"/>
      <button id="db-filter-reset" class="ml-4 px-4 py-1 bg-blue-700 hover:bg-blue-800 text-blue-100 rounded font-bold text-sm transition">Reset</button>
    </div>

    <!-- Dashboard Stats -->
    <div class="mt-6 grid grid-cols-1 md:grid-cols-4 gap-8">
      <div class="stat-card bg-blue-800/80 text-blue-100 rounded-lg p-6 flex flex-col items-center shadow">
        <div class="text-4xl font-extrabold" id="db-total-trades">0</div>
        <div class="mt-2 uppercase text-blue-300 tracking-wide font-bold text-xs">Total Trades</div>
      </div>
      <div class="stat-card bg-blue-800/80 text-blue-100 rounded-lg p-6 flex flex-col items-center shadow">
        <div class="text-4xl font-extrabold text-green-300" id="db-win-rate">0%</div>
        <div class="mt-2 uppercase text-blue-300 tracking-wide font-bold text-xs">Win Rate</div>
      </div>
      <div class="stat-card bg-blue-800/80 text-blue-100 rounded-lg p-6 flex flex-col items-center shadow">
        <div class="text-4xl font-extrabold text-yellow-300" id="db-pnl">0</div>
        <div class="mt-2 uppercase text-blue-300 tracking-wide font-bold text-xs">Net P&amp;L ($)</div>
      </div>
      <div class="stat-card bg-blue-800/80 text-blue-100 rounded-lg p-6 flex flex-col items-center shadow">
        <div class="text-4xl font-extrabold text-pink-300" id="db-max-drawdown">0</div>
        <div class="mt-2 uppercase text-blue-300 tracking-wide font-bold text-xs">Max Drawdown</div>
      </div>
    </div>

    <!-- Dashboard Charts -->
    <div class="mt-12 grid grid-cols-1 xl:grid-cols-2 gap-10">
      <div class="bg-[#232946] rounded-lg p-6 shadow-lg flex flex-col min-h-[420px]">
        <div class="text-lg font-bold text-blue-100 mb-3">Equity Curve</div>
        <canvas id="db-equity-curve" height="300"></canvas>
      </div>
      <div class="bg-[#232946] rounded-lg p-6 shadow-lg flex flex-col min-h-[420px]">
        <div class="text-lg font-bold text-blue-100 mb-3">Trades by Outcome</div>
        <canvas id="db-pie-outcome" height="300"></canvas>
      </div>
      <div class="bg-[#232946] rounded-lg p-6 shadow-lg flex flex-col min-h-[420px]">
        <div class="text-lg font-bold text-blue-100 mb-3">P&amp;L by Asset</div>
        <canvas id="db-bar-asset" height="300"></canvas>
      </div>
      <div class="bg-[#232946] rounded-lg p-6 shadow-lg flex flex-col min-h-[420px]">
        <div class="text-lg font-bold text-blue-100 mb-3">Long vs Short Win Rate</div>
        <canvas id="db-bar-longshort" height="300"></canvas>
      </div>
      <div class="bg-[#232946] rounded-lg p-6 shadow-lg flex flex-col min-h-[420px] xl:col-span-2">
        <div class="text-lg font-bold text-blue-100 mb-3">Monthly Performance</div>
        <canvas id="db-bar-month" height="300"></canvas>
      </div>
      <div class="bg-[#232946] rounded-lg p-6 shadow-lg flex flex-col min-h-[420px] xl:col-span-2">
        <div class="text-lg font-bold text-blue-100 mb-3">Largest Wins &amp; Losses</div>
        <canvas id="db-bar-bigtrades" height="300"></canvas>
      </div>
    </div>

    <!-- Dashboard Table: Top Mistakes & Lessons -->
    <div class="mt-12 bg-blue-800/80 rounded-lg shadow-lg p-6">
      <div class="text-lg font-bold text-yellow-200 mb-3">Most Frequent Mistakes &amp; Lessons</div>
      <ul id="db-mistakes-list" class="list-disc pl-8 text-blue-100 text-base space-y-2"></ul>
    </div>
  </div>
  <style>
    .dashboard-section {
      font-family: 'Montserrat', system-ui, sans-serif;
    }
    .stat-card {
      min-width: 0;
      min-height: 120px;
      background: linear-gradient(120deg, #232946 60%, #2e3866 100%);
      border: 1px solid #2e3866;
    }
    canvas {
      background: transparent;
      width: 100% !important;
      height: 320px !important;
      max-width: 100%;
      display: block;
    }
    #db-mistakes-list li {
      border-left: 4px solid #facc15;
      padding-left: 0.75rem;
      background: #28304a44;
      border-radius: 0.25rem;
      margin-bottom: 0.5rem;
    }
    .min-h-\[420px\] { min-height: 420px; }
    @media (max-width: 900px) {
      .dashboard-section { padding: 1rem !important; }
      .stat-card { padding: 1.5rem 0.7rem; }
      .min-h-\[420px\] { min-height: 300px; }
      canvas { height: 200px !important; }
    }
    @media (max-width: 600px) {
      .stat-card { min-height: 80px; }
      .min-h-\[420px\] { min-height: 180px; }
      canvas { height: 120px !important; }
    }
  </style>
  <!-- Chart functionality replaced with text-based alternatives -->
  <script>
    // --- ENSURE JOURNAL_KEY IS GLOBAL ---
    window.JOURNAL_KEY = window.JOURNAL_KEY || "griffinsrise_journal_v1";
    function getJournal() {
      const data = localStorage.getItem(window.JOURNAL_KEY);
      return data ? JSON.parse(data) : [];
    }
    function safeNum(n) { n = Number(n); return isNaN(n) ? 0 : n; }
    function unique(arr) { return [...new Set(arr.filter(Boolean))]; }

    // --- FILTERS ---
    function getDashboardFilters() {
      return {
        asset: document.getElementById("db-filter-asset").value || "",
        direction: document.getElementById("db-filter-direction").value || "",
        dateFrom: document.getElementById("db-filter-datefrom").value || "",
        dateTo: document.getElementById("db-filter-dateto").value || ""
      };
    }
    function filterJournal(journal, filters) {
      return journal.filter(e => {
        if(filters.asset && e.asset !== filters.asset) return false;
        if(filters.direction && e.direction !== filters.direction) return false;
        if(filters.dateFrom && e.date && e.date < filters.dateFrom) return false;
        if(filters.dateTo && e.date && e.date > filters.dateTo) return false;
        return true;
      });
    }

    // --- STATS/CHARTS ---
    function calcStats(journal) {
      let stats = {
        total: 0,
        wins: 0,
        losses: 0,
        breakevens: 0,
        winRate: 0,
        pnl: 0,
        maxDrawdown: 0,
        equity: [],
        pie: {Win:0, Loss:0, Breakeven:0},
        byAsset: {},
        byDirection: {Long: {win:0, total:0}, Short:{win:0, total:0}},
        byMonth: {},
        bigWins: [],
        bigLosses: [],
        mistakes: [],
      };
      let eq = 0, maxPeak = 0, maxDD = 0, dd = 0;
      journal = journal.slice().reverse();  // oldest to newest for equity
      journal.forEach(e => {
        let p = safeNum(e.pnl);
        eq += p;
        stats.equity.push(eq);
        if(eq > maxPeak) maxPeak = eq;
        dd = maxPeak - eq;
        if(dd > maxDD) maxDD = dd;
        stats.total++;
        if(e.outcome === "Win") stats.wins++;
        else if(e.outcome === "Loss") stats.losses++;
        else if(e.outcome === "Breakeven") stats.breakevens++;
        stats.pie[e.outcome] = (stats.pie[e.outcome]||0)+1;
        stats.byAsset[e.asset] = (stats.byAsset[e.asset]||0) + p;
        if(e.direction === "Long" || e.direction === "Short") {
          stats.byDirection[e.direction].total++;
          if(e.outcome === "Win") stats.byDirection[e.direction].win++;
        }
        if(e.date && /^[0-9]{4}-[0-9]{2}/.test(e.date)) {
          const ym = e.date.slice(0,7);
          stats.byMonth[ym] = (stats.byMonth[ym]||0) + p;
        }
        if(typeof p === 'number') {
          if(p > 0) stats.bigWins.push({date:e.date||"", pnl:p, asset:e.asset||""});
          else if(p < 0) stats.bigLosses.push({date:e.date||"", pnl:p, asset:e.asset||""});
        }
        if(e.mistakes) stats.mistakes.push(e.mistakes.trim());
      });
      stats.winRate = stats.total ? (stats.wins / stats.total * 100).toFixed(1) : 0;
      stats.pnl = eq;
      stats.maxDrawdown = maxDD;
      stats.bigWins = stats.bigWins.sort((a,b)=>b.pnl-a.pnl).slice(0,5);
      stats.bigLosses = stats.bigLosses.sort((a,b)=>a.pnl-b.pnl).slice(0,5);
      return stats;
    }

    // --- RENDER DASHBOARD ---
    function renderDashboard() {
      const allJournal = getJournal();
      // Populate asset dropdown
      const assetSel = document.getElementById("db-filter-asset");
      const currentAsset = assetSel.value;
      const assets = unique(allJournal.map(e=>e.asset));
      assetSel.innerHTML = '<option value="">All</option>' + assets.map(a=>`<option>${a}</option>`).join('');
      assetSel.value = currentAsset; // Retain selection

      // Apply filters
      const filters = getDashboardFilters();
      const journal = filterJournal(allJournal, filters);
      const stats = calcStats(journal);

      // Stats
      document.getElementById("db-total-trades").textContent = stats.total;
      document.getElementById("db-win-rate").textContent = stats.winRate + "%";
      document.getElementById("db-pnl").textContent = (stats.pnl >= 0 ? "+" : "") + stats.pnl.toFixed(2);
      document.getElementById("db-max-drawdown").textContent = "-" + stats.maxDrawdown.toFixed(2);

      // --- CHART COLORS ---
      const chartColors = {
        blue: "#38bdf8",
        green: "#22d3ee",
        lightGreen: "#4ade80",
        yellow: "#eab308",
        orange: "#f59e42",
        red: "#ef4444",
        pink: "#e879f9",
        purple: "#a78bfa",
        bg: "rgba(56,189,248,0.12)",
        gray: "#64748b",
        dark: "#232946"
      };

      // --- Simple Text-Based Charts (replaces Chart.js dependency) ---
      
      // Equity Curve (text representation)
      const equityEl = document.getElementById("db-equity-curve");
      if (equityEl) {
        const equityData = stats.equity;
        const lastEquity = equityData[equityData.length - 1] || 0;
        const trend = equityData.length > 1 ? 
          (lastEquity > equityData[equityData.length - 2] ? "📈 +" : 
           lastEquity < equityData[equityData.length - 2] ? "📉 -" : "➡️ =") : "➡️";
        equityEl.innerHTML = `
          <div style="padding: 20px; background: #1a2236; border-radius: 8px; text-align: center; min-height: 200px; display: flex; flex-direction: column; justify-content: center;">
            <h4 style="color: #60a5fa; margin: 0 0 15px 0;">Equity Curve</h4>
            <div style="font-size: 24px; color: #facc15; margin: 10px 0;">${trend} $${lastEquity.toFixed(2)}</div>
            <div style="color: #9ca3af; font-size: 14px;">${equityData.length} trades tracked</div>
          </div>
        `;
      }

      // --- Pie Chart by Outcome ---
      if(window.dbPieChart) window.dbPieChart.destroy();
      window.dbPieChart = // new Chart(document.getElementById("db-pie-outcome"), {
        type: 'doughnut',
        data: {
          labels: ["Win", "Loss", "Breakeven"],
          datasets: [{
            data: [stats.pie.Win||0, stats.pie.Loss||0, stats.pie.Breakeven||0],
            backgroundColor: [chartColors.lightGreen, chartColors.red, chartColors.yellow],
            borderColor: chartColors.dark,
            borderWidth: 2
          }]
        },
        options: {
          plugins: { 
            legend: {labels:{color:chartColors.gray, font:{weight:'bold'}}},
            tooltip: {callbacks:{
              label: ctx => ctx.label+": "+ctx.parsed+" ("+((ctx.parsed/stats.total*100)||0).toFixed(1)+"%)"
            }},
          },
          cutout: "60%",
          responsive: true,
          maintainAspectRatio: false,
        }
      });

      // --- Bar: P&L by Asset ---
      if(window.dbAssetChart) window.dbAssetChart.destroy();
      const assetLabels = Object.keys(stats.byAsset);
      const assetData = assetLabels.map(k=>stats.byAsset[k]);
      window.dbAssetChart = // new Chart(document.getElementById("db-bar-asset"), {
        type: 'bar',
        data: {
          labels: assetLabels,
          datasets: [{
            label: "Net P&L",
            data: assetData,
            backgroundColor: assetData.map(v=>v>=0?chartColors.green:chartColors.red)
          }]
        },
        options: {
          plugins: { legend: {display:false} },
          responsive: true,
          maintainAspectRatio: false,
          scales: {
            x: { ticks:{color:chartColors.gray}, grid:{color:'#28304a'} },
            y: { beginAtZero:true, ticks:{color:chartColors.gray}, grid:{color:'#28304a'} }
          }
        }
      });

      // --- Bar: Long vs Short Win Rate ---
      if(window.dbLongShortChart) window.dbLongShortChart.destroy();
      const dirs = ["Long","Short"];
      const wr = dirs.map(d=>stats.byDirection[d].total?stats.byDirection[d].win/stats.byDirection[d].total*100:0);
      window.dbLongShortChart = // new Chart(document.getElementById("db-bar-longshort"), {
        type: 'bar',
        data: {
          labels: dirs,
          datasets: [{
            label: "Win Rate (%)",
            data: wr,
            backgroundColor: [chartColors.blue,chartColors.pink]
          }]
        },
        options: {
          plugins: { legend: {display:false} },
          responsive: true,
          maintainAspectRatio: false,
          scales: {
            x: { ticks:{color:chartColors.gray}, grid:{color:'#28304a'} },
            y: { beginAtZero:true, max:100, ticks:{color:chartColors.gray}, grid:{color:'#28304a'} }
          }
        }
      });

      // --- Monthly Performance Bar ---
      if(window.dbMonthChart) window.dbMonthChart.destroy();
      const months = Object.keys(stats.byMonth).sort();
      const monthVals = months.map(m=>stats.byMonth[m]);
      window.dbMonthChart = // new Chart(document.getElementById("db-bar-month"), {
        type: 'bar',
        data: {
          labels: months,
          datasets: [{
            label: "Monthly P&L",
            data: monthVals,
            backgroundColor: monthVals.map(v=>v>=0?chartColors.lightGreen:chartColors.red)
          }]
        },
        options: {
          plugins: { legend: {display:false} },
          responsive: true,
          maintainAspectRatio: false,
          scales: {
            x: { ticks:{color:chartColors.gray}, grid:{color:'#28304a'} },
            y: { beginAtZero:true, ticks:{color:chartColors.gray}, grid:{color:'#28304a'} }
          }
        }
      });

      // --- Big Trades (Top 5 Wins & Losses) ---
      if(window.dbBigChart) window.dbBigChart.destroy();
      const bigLabels = [
        ...stats.bigWins.map(e=>`+${e.pnl.toFixed(2)} ${e.asset} [${e.date}]`),
        ...stats.bigLosses.map(e=>`${e.pnl.toFixed(2)} ${e.asset} [${e.date}]`)
      ];
      const bigData = [
        ...stats.bigWins.map(e=>e.pnl),
        ...stats.bigLosses.map(e=>e.pnl)
      ];
      window.dbBigChart = // new Chart(document.getElementById("db-bar-bigtrades"), {
        type: 'bar',
        data: {
          labels: bigLabels,
          datasets: [{
            label: "Biggest Wins/Losses",
            data: bigData,
            backgroundColor: [
              ...stats.bigWins.map(e=>chartColors.lightGreen),
              ...stats.bigLosses.map(e=>chartColors.red)
            ]
          }]
        },
        options: {
          plugins: { legend: {display:false} },
          responsive: true,
          maintainAspectRatio: false,
          scales: {
            x: { ticks:{color:chartColors.gray, autoSkip:false, maxRotation:60, minRotation:30}, grid:{color:'#28304a'} },
            y: { ticks:{color:chartColors.gray}, grid:{color:'#28304a'} }
          }
        }
      });

      // Top Mistakes/Lessons
      const mistakesList = document.getElementById("db-mistakes-list");
      mistakesList.innerHTML = "";
      if(stats.mistakes.length) {
        let freq = {};
        stats.mistakes.filter(Boolean).forEach(m=>{
          m.split(/[.;\n]/).map(x=>x.trim()).filter(x=>x).forEach(line=>{
            freq[line] = (freq[line]||0)+1;
          });
        });
        const top = Object.entries(freq)
          .sort((a,b)=>b[1]-a[1])
          .slice(0,7)
          .map(([txt,count])=>`<li><b>${count}×</b> ${txt}</li>`).join('');
        mistakesList.innerHTML = top || "<li>No mistakes/lessons recorded.</li>";
      } else {
        mistakesList.innerHTML = "<li>No mistakes/lessons recorded.</li>";
      }
    }

    function setupDashboardFilters() {
      document.getElementById("db-filter-reset").onclick = function() {
        document.getElementById("db-filter-asset").value = "";
        document.getElementById("db-filter-direction").value = "";
        document.getElementById("db-filter-datefrom").value = "";
        document.getElementById("db-filter-dateto").value = "";
        renderDashboard();
      };
      ["db-filter-asset","db-filter-direction","db-filter-datefrom","db-filter-dateto"].forEach(id => {
        document.getElementById(id).onchange = renderDashboard;
      });
    }

    document.addEventListener("DOMContentLoaded", ()=>{
      setupDashboardFilters();
      renderDashboard();
    });

    // Make renderDashboard available globally for journal sync
    window.renderDashboard = renderDashboard;
  </script>
</section>
</main>
<footer class="bg-[#232946] text-blue-200 py-4 mt-6 text-center border-t border-blue-900 font-semibold text-base shadow">
  &copy; 2025 Griffin's Rise: Advanced Trading Journal Pro Edition | Powered by Copilot & TailwindCSS
</footer>
<script>
/* ========= LOGIN & NAVIGATION JS ========= */

// ---- Tab & Content Elements ----
const educationTab = document.getElementById("educationTab");
const syllabusTab = document.getElementById("syllabusTab");
const trainingManualTab = document.getElementById("trainingManualTab");
const journalTab = document.getElementById("journalTab");
const dashboardTab = document.getElementById("dashboardTab");
const loginTab = document.getElementById("loginTab");
const logoutBtn = document.getElementById("logoutBtn");
const educationContent = document.getElementById("educationContent");
const syllabusContent = document.getElementById("syllabusContent");
const trainingManualContent = document.getElementById("trainingManualContent");
const journalContent = document.getElementById("journalContent");
const dashboardContent = document.getElementById("dashboardContent");
const loginContent = document.getElementById("loginContent");
const loginForm = document.getElementById("loginForm");
const registerForm = document.getElementById("registerForm");
const switchToRegister = document.getElementById("switchToRegister");
const switchToLogin = document.getElementById("switchToLogin");
const loginMessage = document.getElementById("loginMessage");

// ---- Auth State ----
function setLoggedIn(loggedIn, username="") {
  localStorage.setItem("loggedIn", loggedIn ? "yes" : "no");
  if (loggedIn && username) {
    localStorage.setItem("username", username);
  } else {
    localStorage.removeItem("username");
  }
}
function isLoggedIn() {
  return localStorage.getItem("loggedIn") === "yes";
}

// ---- Nav/UI Update ----
function updateNavForLogin() {
  const navButtons = [educationTab, syllabusTab, trainingManualTab, journalTab, dashboardTab];
  if (!isLoggedIn()) {
    navButtons.forEach(btn => btn && btn.classList.add("hidden"));
    if (loginTab) loginTab.classList.remove("hidden");
    if (logoutBtn) logoutBtn.classList.add("hidden");
    showTab("login");
  } else {
    navButtons.forEach(btn => btn && btn.classList.remove("hidden"));
    if (loginTab) loginTab.classList.add("hidden");
    if (logoutBtn) logoutBtn.classList.remove("hidden");
    showTab("education");
  }
}
function showTab(tab) {
  [educationTab, syllabusTab, trainingManualTab, journalTab, dashboardTab, loginTab].forEach(btn => btn && btn.classList.remove("tab-active"));
  educationContent && educationContent.classList.add("hidden");
  syllabusContent && syllabusContent.classList.add("hidden");
  trainingManualContent && trainingManualContent.classList.add("hidden");
  journalContent && journalContent.classList.add("hidden");
  dashboardContent && dashboardContent.classList.add("hidden");
  loginContent && loginContent.classList.add("hidden");
  if (tab === "education") {educationContent && educationContent.classList.remove("hidden"); educationTab && educationTab.classList.add("tab-active");}
  if (tab === "syllabus") {syllabusContent && syllabusContent.classList.remove("hidden"); syllabusTab && syllabusTab.classList.add("tab-active");}
  if (tab === "trainingManual") {trainingManualContent && trainingManualContent.classList.remove("hidden"); trainingManualTab && trainingManualTab.classList.add("tab-active");}
  if (tab === "journal") {journalContent && journalContent.classList.remove("hidden"); journalTab && journalTab.classList.add("tab-active");}
  if (tab === "dashboard") {dashboardContent && dashboardContent.classList.remove("hidden"); dashboardTab && dashboardTab.classList.add("tab-active");}
  if (tab === "login") {loginContent && loginContent.classList.remove("hidden"); loginTab && loginTab.classList.add("tab-active");}
  window.scrollTo({top:0,behavior:'smooth'});
}

// ---- Nav Button Handlers ----
if (educationTab) educationTab.addEventListener("click", () => showTab("education"));
if (syllabusTab) syllabusTab.addEventListener("click", () => showTab("syllabus"));
if (trainingManualTab) trainingManualTab.addEventListener("click", () => showTab("trainingManual"));
if (journalTab) journalTab.addEventListener("click", () => showTab("journal"));
if (dashboardTab) dashboardTab.addEventListener("click", () => showTab("dashboard"));
if (loginTab) loginTab.addEventListener("click", () => showTab("login"));
if (logoutBtn) logoutBtn.onclick = function() { setLoggedIn(false); updateNavForLogin(); };

// ---- Register/Login Toggle ----
if (switchToRegister) {
  switchToRegister.onclick = function() {
    loginForm && loginForm.classList.add("hidden");
    registerForm && registerForm.classList.remove("hidden");
    loginMessage && (loginMessage.textContent = "");
  };
}
if (switchToLogin) {
  switchToLogin.onclick = function() {
    registerForm && registerForm.classList.add("hidden");
    loginForm && loginForm.classList.remove("hidden");
    loginMessage && (loginMessage.textContent = "");
  };
}

// ---- Login Handler ----
if (loginForm) {
  loginForm.onsubmit = function(e) {
    e.preventDefault();
    const username = document.getElementById("login-username").value;
    setLoggedIn(true, username);
    updateNavForLogin();
    if (loginMessage) {
      loginMessage.textContent = "Logged in as " + username + "!";
      loginMessage.classList.remove("text-red-600");
      loginMessage.classList.add("text-green-400");
      setTimeout(() => { loginMessage.textContent = ""; }, 1200);
    }
  };
}

// ---- Register Handler ----
if (registerForm) {
  registerForm.onsubmit = function(e) {
    e.preventDefault();
    const user = document.getElementById("register-username").value;
    const pass = document.getElementById("register-password").value;
    const conf = document.getElementById("register-confirm").value;
    if (pass !== conf) {
      loginMessage.textContent = "Passwords do not match!";
      loginMessage.classList.remove("text-green-400");
      loginMessage.classList.add("text-red-600");
      return;
    }
    setLoggedIn(true, user);
    updateNavForLogin();
    loginMessage.textContent = "Registered as " + user + "!";
    loginMessage.classList.remove("text-red-600");
    loginMessage.classList.add("text-green-400");
    setTimeout(() => {
      loginMessage.textContent = "";
    }, 1200);
  };
}

// ---- On Page Load ----
updateNavForLogin();


</script>
<script>
// --- Auto-calculate PNL ---
function autoCalcJournalPNL() {
  const entry = parseFloat(document.getElementById("journal-entry").value || "0");
  const exit = parseFloat(document.getElementById("journal-exit").value || "0");
  const size = parseFloat(document.getElementById("journal-size").value || "0");
  const direction = document.getElementById("journal-direction").value;
  let pnl = 0;
  if (direction === "Long") pnl = (exit - entry) * size;
  else if (direction === "Short") pnl = (entry - exit) * size;
  document.getElementById("journal-pnl").value = pnl.toFixed(2);
}
["journal-entry", "journal-exit", "journal-size", "journal-direction"].forEach(id => {
  const el = document.getElementById(id);
  if (el) el.addEventListener("input", autoCalcJournalPNL);
});

// --- Add Entry Handler ---
document.getElementById("journalForm").onsubmit = function(e) {
  e.preventDefault();
  const entry = {
    date: document.getElementById("journal-date").value,
    asset: document.getElementById("journal-asset").value,
    direction: document.getElementById("journal-direction").value,
    phase: document.getElementById("journal-phase").value,
    thesis: document.getElementById("journal-thesis").value,
    entry: parseFloat(document.getElementById("journal-entry").value || "0"),
    exit: parseFloat(document.getElementById("journal-exit").value || "0"),
    sl: parseFloat(document.getElementById("journal-sl").value || "0"),
    tp: parseFloat(document.getElementById("journal-tp").value || "0"),
    size: parseFloat(document.getElementById("journal-size").value || "0"),
    outcome: document.getElementById("journal-outcome").value,
    pnl: parseFloat(document.getElementById("journal-pnl").value || "0"),
    emotion: document.getElementById("journal-emotion").value,
    mistakes: document.getElementById("journal-mistakes").value,
  };
  const key = window.JOURNAL_KEY || "griffinsrise_journal_v1";
  const data = JSON.parse(localStorage.getItem(key) || "[]");
  data.push(entry);
  localStorage.setItem(key, JSON.stringify(data));
  this.reset();
  document.getElementById("journal-pnl").value = "";
  if (window.renderDashboard) window.renderDashboard();
  if (window.renderJournalTable) window.renderJournalTable();
  document.getElementById("journal-message").textContent = "Entry added!";
};
</script>

<script>
function renderJournalTable() {
  // 1. Get the journal entries from localStorage
  const key = window.JOURNAL_KEY || "griffinsrise_journal_v1";
  const data = JSON.parse(localStorage.getItem(key) || "[]");

  // 2. Find your journal table body (add this <tbody id="journal-table-body"> if you don't have one)
  const tableBody = document.getElementById("journal-table-body");
  if (!tableBody) return;

  // 3. Clear table
  tableBody.innerHTML = "";

  // 4. If no entries
  if (!data.length) {
    document.getElementById("journal-progress").textContent = "No entries yet.";
    return;
  }

  // 5. Otherwise, show table rows
  document.getElementById("journal-progress").textContent = `${data.length} entries logged.`;
  for (let entry of data) {
    const row = document.createElement("tr");
    row.innerHTML = `
      <td>${entry.date || ""}</td>
      <td>${entry.asset || ""}</td>
      <td>${entry.direction || ""}</td>
      <td>${entry.phase || ""}</td>
      <td>${entry.thesis || ""}</td>
      <td>${entry.entry || ""}</td>
      <td>${entry.exit || ""}</td>
      <td>${entry.size || ""}</td>
      <td>${entry.outcome || ""}</td>
      <td>${typeof entry.pnl !== "undefined" ? entry.pnl : ""}</td>
    `;
    tableBody.appendChild(row);
  }
}

// Call on page load
document.addEventListener("DOMContentLoaded", renderJournalTable);
// Also call after adding an entry! (already in previous code)
</script>

</body>
</html>